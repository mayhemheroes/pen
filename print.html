<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Pen programming language</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
<script
  defer
  data-domain="pen-lang.org"
  src="https://plausible.io/js/plausible.js"
></script>
<style>
  code { border-radius: 3px; }
</style>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="The programming language for scalable development">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/pagetoc.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="introduction/install.html"><strong aria-hidden="true">1.1.</strong> Install</a></li><li class="chapter-item expanded "><a href="introduction/getting-started.html"><strong aria-hidden="true">1.2.</strong> Getting started</a></li></ol></li><li class="chapter-item expanded "><a href="guides/index.html"><strong aria-hidden="true">2.</strong> Guides</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="guides/building-an-executable.html"><strong aria-hidden="true">2.1.</strong> Building an executable</a></li><li class="chapter-item expanded "><a href="guides/creating-a-library.html"><strong aria-hidden="true">2.2.</strong> Creating a library</a></li><li class="chapter-item expanded "><a href="guides/using-a-library.html"><strong aria-hidden="true">2.3.</strong> Using a library</a></li><li class="chapter-item expanded "><a href="guides/testing.html"><strong aria-hidden="true">2.4.</strong> Testing</a></li><li class="chapter-item expanded "><a href="guides/concurrency-and-parallelism.html"><strong aria-hidden="true">2.5.</strong> Concurrency and parallelism</a></li><li class="chapter-item expanded "><a href="guides/coding-style.html"><strong aria-hidden="true">2.6.</strong> Coding style</a></li></ol></li><li class="chapter-item expanded "><a href="references/index.html"><strong aria-hidden="true">3.</strong> References</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="references/language/index.html"><strong aria-hidden="true">3.1.</strong> Language</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="references/language/syntax.html"><strong aria-hidden="true">3.1.1.</strong> Syntax</a></li><li class="chapter-item expanded "><a href="references/language/types.html"><strong aria-hidden="true">3.1.2.</strong> Types</a></li><li class="chapter-item expanded "><a href="references/language/built-ins.html"><strong aria-hidden="true">3.1.3.</strong> Built-ins</a></li><li class="chapter-item expanded "><a href="references/language/modules.html"><strong aria-hidden="true">3.1.4.</strong> Modules</a></li><li class="chapter-item expanded "><a href="references/language/packages.html"><strong aria-hidden="true">3.1.5.</strong> Packages</a></li></ol></li><li class="chapter-item expanded "><a href="references/command-line-tools.html"><strong aria-hidden="true">3.2.</strong> Command line tools</a></li><li class="chapter-item expanded "><a href="references/standard-packages/index.html"><strong aria-hidden="true">3.3.</strong> Standard packages</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="references/standard-packages/core.html"><strong aria-hidden="true">3.3.1.</strong> Core</a></li><li class="chapter-item expanded "><a href="references/standard-packages/flag.html"><strong aria-hidden="true">3.3.2.</strong> Flag</a></li><li class="chapter-item expanded "><a href="references/standard-packages/json.html"><strong aria-hidden="true">3.3.3.</strong> Json</a></li><li class="chapter-item expanded "><a href="references/standard-packages/html.html"><strong aria-hidden="true">3.3.4.</strong> Html</a></li><li class="chapter-item expanded "><a href="references/standard-packages/http.html"><strong aria-hidden="true">3.3.5.</strong> Http</a></li><li class="chapter-item expanded "><a href="references/standard-packages/os.html"><strong aria-hidden="true">3.3.6.</strong> Os</a></li><li class="chapter-item expanded "><a href="references/standard-packages/random.html"><strong aria-hidden="true">3.3.7.</strong> Random</a></li><li class="chapter-item expanded "><a href="references/standard-packages/regex.html"><strong aria-hidden="true">3.3.8.</strong> Regex</a></li><li class="chapter-item expanded "><a href="references/standard-packages/sql.html"><strong aria-hidden="true">3.3.9.</strong> Sql</a></li><li class="chapter-item expanded "><a href="references/standard-packages/test.html"><strong aria-hidden="true">3.3.10.</strong> Test</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="examples/index.html"><strong aria-hidden="true">4.</strong> Examples</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="examples/types/index.html"><strong aria-hidden="true">4.1.</strong> Types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="examples/types/number.html"><strong aria-hidden="true">4.1.1.</strong> Number</a></li><li class="chapter-item expanded "><a href="examples/types/boolean.html"><strong aria-hidden="true">4.1.2.</strong> Boolean</a></li><li class="chapter-item expanded "><a href="examples/types/none.html"><strong aria-hidden="true">4.1.3.</strong> None</a></li><li class="chapter-item expanded "><a href="examples/types/string.html"><strong aria-hidden="true">4.1.4.</strong> String</a></li><li class="chapter-item expanded "><a href="examples/types/function.html"><strong aria-hidden="true">4.1.5.</strong> Function</a></li><li class="chapter-item expanded "><a href="examples/types/record.html"><strong aria-hidden="true">4.1.6.</strong> Record</a></li><li class="chapter-item expanded "><a href="examples/types/union.html"><strong aria-hidden="true">4.1.7.</strong> Union</a></li><li class="chapter-item expanded "><a href="examples/types/list.html"><strong aria-hidden="true">4.1.8.</strong> List</a></li><li class="chapter-item expanded "><a href="examples/types/error.html"><strong aria-hidden="true">4.1.9.</strong> Error</a></li><li class="chapter-item expanded "><a href="examples/types/any.html"><strong aria-hidden="true">4.1.10.</strong> Any</a></li><li class="chapter-item expanded "><a href="examples/types/polymorphism.html"><strong aria-hidden="true">4.1.11.</strong> Polymorphism</a></li></ol></li><li class="chapter-item expanded "><a href="examples/syntax/index.html"><strong aria-hidden="true">4.2.</strong> Syntax</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="examples/syntax/block.html"><strong aria-hidden="true">4.2.1.</strong> Block</a></li></ol></li><li class="chapter-item expanded "><a href="examples/module.html"><strong aria-hidden="true">4.3.</strong> Modules</a></li><li class="chapter-item expanded "><a href="examples/package.html"><strong aria-hidden="true">4.4.</strong> Packages</a></li><li class="chapter-item expanded "><a href="examples/commands/index.html"><strong aria-hidden="true">4.5.</strong> Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="examples/commands/build.html"><strong aria-hidden="true">4.5.1.</strong> Building packages</a></li><li class="chapter-item expanded "><a href="examples/commands/create.html"><strong aria-hidden="true">4.5.2.</strong> Creating packages</a></li><li class="chapter-item expanded "><a href="examples/commands/test.html"><strong aria-hidden="true">4.5.3.</strong> Testing packages</a></li><li class="chapter-item expanded "><a href="examples/commands/format.html"><strong aria-hidden="true">4.5.4.</strong> Formatting module files</a></li></ol></li><li class="chapter-item expanded "><a href="examples/standard-packages/index.html"><strong aria-hidden="true">4.6.</strong> Standard packages</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="examples/standard-packages/core.html"><strong aria-hidden="true">4.6.1.</strong> Core</a></li><li class="chapter-item expanded "><a href="examples/standard-packages/os.html"><strong aria-hidden="true">4.6.2.</strong> Os</a></li><li class="chapter-item expanded "><a href="examples/standard-packages/random.html"><strong aria-hidden="true">4.6.3.</strong> Random</a></li><li class="chapter-item expanded "><a href="examples/standard-packages/test.html"><strong aria-hidden="true">4.6.4.</strong> Test</a></li></ol></li><li class="chapter-item expanded "><a href="examples/ffi.html"><strong aria-hidden="true">4.7.</strong> Foreign Function Interface (FFI)</a></li></ol></li><li class="chapter-item expanded "><a href="advanced-features/index.html"><strong aria-hidden="true">5.</strong> Advanced features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="advanced-features/cross-compile.html"><strong aria-hidden="true">5.1.</strong> Cross compile</a></li><li class="chapter-item expanded "><a href="advanced-features/ffi.html"><strong aria-hidden="true">5.2.</strong> Foreign Function Interface (FFI)</a></li><li class="chapter-item expanded "><a href="advanced-features/writing-system-packages.html"><strong aria-hidden="true">5.3.</strong> Writing system packages</a></li></ol></li><li class="chapter-item expanded "><a href="roadmap.html"><strong aria-hidden="true">6.</strong> Roadmap</a></li><li class="chapter-item expanded "><a href="the-zen.html"><strong aria-hidden="true">7.</strong> The Zen</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Pen programming language</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/pen-lang/pen" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main><div class="sidetoc"><nav class="pagetoc"></nav></div>
                        <p align="center"><img width="300px" src="/favicon.svg" /></p>
<h1 id="pen-programming-language"><a class="header" href="#pen-programming-language">Pen programming language</a></h1>
<p>Pen is the parallel, concurrent, and functional programming language for <a href="index.html#vision"><strong>scalable</strong> software development</a>, focused on software maintainability and portability.</p>
<pre><code class="language-pen">import Core'Number
import Os'File

# The `\` prefix for λ denotes a function.
findAnswer = \(kind string) number {
  # Secret source...

  21
}

main = \(ctx context) none {
  # The `go` function runs a given function in parallel.
  # `x` is a future for the computed value.
  x = go(\() number { findAnswer(&quot;humanity&quot;) })
  y = findAnswer(&quot;dolphins&quot;)

  _ = File'Write(ctx, File'StdOut(), Number'String(x() + y))

  none
}
</code></pre>
<h2 id="vision"><a class="header" href="#vision">Vision</a></h2>
<p>Pen aims to make large-scale software development efficient where many engineers develop software together for a long time. To realize that, it focuses on software <strong>maintainability</strong> and <strong>portability</strong>.</p>
<ul>
<li>Maintainability
<ul>
<li>Simplicity: The language is small and easy to learn yet full featured.</li>
<li>Testability: Tests are always fast and reliable.</li>
<li>Flexibility: Developers can change codes easily without regression.</li>
</ul>
</li>
<li>Portability
<ul>
<li>Programs written in Pen can be ported to different platforms including <a href="https://webassembly.org/">WebAssembly</a>.</li>
</ul>
</li>
</ul>
<h2 id="features"><a class="header" href="#features">Features</a></h2>
<h3 id="minimal-language"><a class="header" href="#minimal-language">Minimal language</a></h3>
<ul>
<li>Its <a href="/references/language/syntax.html">syntax</a> and <a href="/references/language/types.html">type system</a> are small, simple, and easy to learn.</li>
<li>Yet, the language supports all the modern features.</li>
</ul>
<h3 id="concurrentparallel-computation"><a class="header" href="#concurrentparallel-computation">Concurrent/parallel computation</a></h3>
<ul>
<li>The language and its runtime enables thread-safe concurrent/parallel computation.</li>
<li>For more information, see <a href="/guides/concurrency-and-parallelism.html">Concurrency and parallelism</a>.</li>
</ul>
<h3 id="reliable-testing"><a class="header" href="#reliable-testing">Reliable testing</a></h3>
<ul>
<li>Tests are always deterministic and fast.</li>
<li>Tests are side-effect free and independent from test environment.</li>
</ul>
<h3 id="no-built-in-system-library"><a class="header" href="#no-built-in-system-library">No built-in system library</a></h3>
<ul>
<li>There is no built-in system library dependent on platforms.</li>
<li>Developers choose <a href="/advanced-features/writing-system-packages.html">system packages</a> suitable for their applications.</li>
<li><a href="/advanced-features/writing-system-packages.html">System packages</a> encapsulate platform-dependent codes and side effects.</li>
<li>No other kind of package causes side effects without explicit injection.</li>
</ul>
<h3 id="security"><a class="header" href="#security">Security</a></h3>
<ul>
<li><a href="/references/language/syntax.html#error-handling">No runtime exception</a></li>
<li>No undefined behavior</li>
<li>No data race</li>
</ul>
<h3 id="even-more"><a class="header" href="#even-more">Even more...</a></h3>
<ul>
<li>Static typing</li>
<li>Immutable values</li>
<li>Pure functions by default</li>
<li><a href="/references/language/syntax.html#error-handling">Errors as values</a></li>
<li>Asynchronous I/O</li>
<li><a href="/advanced-features/cross-compile.html">Cross compile</a></li>
<li><a href="https://www.rust-lang.org/">Rust</a>/C Foreign Function Interface (FFI)</li>
</ul>
<h2 id="license"><a class="header" href="#license">License</a></h2>
<p>Pen is dual-licensed under <a href="https://github.com/pen-lang/pen/blob/main/LICENSE-MIT">MIT</a> and <a href="https://github.com/pen-lang/pen/blob/main/LICENSE-APACHE">Apache 2.0</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="install"><a class="header" href="#install">Install</a></h1>
<h2 id="via-homebrew"><a class="header" href="#via-homebrew">Via Homebrew</a></h2>
<p>On Linux, macOS and <a href="https://docs.microsoft.com/en-us/windows/wsl/about">WSL</a>, you can install Pen through <a href="https://brew.sh">Homebrew</a>.</p>
<ol>
<li>
<p>Install <a href="https://brew.sh">Homebrew</a>.</p>
</li>
<li>
<p>Run the following command in your terminal.</p>
<pre><code class="language-sh">brew install pen-lang/pen/pen
</code></pre>
</li>
</ol>
<p>Now, you should be able to run a <code>pen</code> command in your shell.</p>
<pre><code class="language-sh">pen --version
</code></pre>
<h2 id="building-from-source"><a class="header" href="#building-from-source">Building from source</a></h2>
<p>You can also build Pen from source on your local machine.</p>
<ol>
<li>
<p>Install the following software using a package manager of your choice (e.g. <code>apt</code> for Ubuntu and <a href="https://brew.sh">Homebrew</a> for macOS.)</p>
<ul>
<li><a href="https://www.rust-lang.org/">Rust</a></li>
<li><a href="https://llvm.org/">LLVM 14</a></li>
<li><a href="https://git-scm.com/">Git</a></li>
<li><a href="https://ninja-build.org/">Ninja</a></li>
</ul>
</li>
<li>
<p>Clone the Git repository.</p>
<pre><code class="language-sh">git clone https://github.com/pen-lang/pen
</code></pre>
</li>
<li>
<p>Run a <code>cargo</code> command in the repository's directory.</p>
<pre><code class="language-sh">cargo install --path cmd/pen
</code></pre>
</li>
<li>
<p>Set a <code>PEN_ROOT</code> environment variable to the directory.</p>
<pre><code class="language-sh">export PEN_ROOT=&lt;directory&gt;
</code></pre>
</li>
</ol>
<p>Now, you are ready to use the <code>pen</code> command built manually.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started"><a class="header" href="#getting-started">Getting started</a></h1>
<h2 id="install-1"><a class="header" href="#install-1">Install</a></h2>
<p>See <a href="introduction/install.html">Install</a>.</p>
<h2 id="creating-a-package"><a class="header" href="#creating-a-package">Creating a package</a></h2>
<p>To create your first package, run a <code>pen create</code> command with your package's name in your terminal.</p>
<pre><code class="language-sh">pen create foo
</code></pre>
<p>Then, you should see a directory named <code>foo</code> in your current directory. When you go into the directory, you should see a <code>main.pen</code> source file and a <code>pen.json</code> file for <a href="introduction//references/language/packages.html#package-configuration">package configuration</a>.</p>
<h2 id="building-a-package"><a class="header" href="#building-a-package">Building a package</a></h2>
<p>To build the package, run a <code>pen build</code> command in the <code>foo</code> directory.</p>
<pre><code class="language-sh">pen build
</code></pre>
<p>Then, you will see an executable file named <code>app</code> in the directory. Run it to see your first &quot;Hello, world!&quot;</p>
<pre><code class="language-sh">./app # -&gt; Hello, world!
</code></pre>
<p>Now, you can start editing source files and build your own application in Pen!</p>
<h2 id="next-steps"><a class="header" href="#next-steps">Next steps</a></h2>
<ul>
<li>To use other library packages, see <a href="introduction//guides/using-a-library.html">Using a library</a>.</li>
<li>For more code examples, see <a href="introduction//examples">Examples</a>.</li>
<li>For the language syntax, see <a href="introduction//references/language/syntax.html">Syntax</a> and <a href="introduction//references/language/types.html">Types</a>.</li>
<li>For usage of the standard packages, see <a href="introduction//references/standard-packages">Standard packages</a>.</li>
<li>To add more modules in your package, see <a href="introduction//references/language/modules.html">Modules</a>.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="guides"><a class="header" href="#guides">Guides</a></h1>
<p>This chapter contains how-to guides for software development in Pen.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="building-an-executable"><a class="header" href="#building-an-executable">Building an executable</a></h1>
<p>This page describes how to build an executable of a program written in Pen. It consists of the following steps:</p>
<ol>
<li>Create an <em>application</em> package.</li>
<li>Build the package into an executable.</li>
</ol>
<h2 id="creating-an-application-package"><a class="header" href="#creating-an-application-package">Creating an application package</a></h2>
<p><a href="guides//references/language/packages.html#application-packages">Application packages</a> are packages that are built into executables.
To create it, you run a <code>pen create</code> command with your application's name (e.g. <code>foo</code>) in your terminal.</p>
<pre><code class="language-sh">pen create foo
</code></pre>
<p>Then, you should see a <code>foo</code> directory in your current directory. When you go there, you should see a <code>main.pen</code> source file and a <code>pen.json</code> file for <a href="guides//references/language/packages.html#package-configuration">package configuration</a>.</p>
<p><code>main.pen</code>:</p>
<pre><code class="language-pen">import Os'File

main = \(ctx context) none {
  _ = File'Write(ctx.Os, File'StdOut(), &quot;Hello, world!\n&quot;)

  none
}
</code></pre>
<p><code>pen.json</code>:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;application&quot;,
  &quot;dependencies&quot;: {
    &quot;Os&quot;: &quot;pen:///os&quot;
  }
}
</code></pre>
<p>In this example, the <code>main.pen</code> file contains a program that outputs a text, &quot;Hello, world!&quot; in a terminal. And the <code>pen.json</code> configuration file defines a package type of <code>application</code> and its dependencies. Here, it has only a dependency of the <code>Os</code> <a href="guides//references/language/packages.html#system-packages">system package</a>.</p>
<h2 id="building-a-package-into-an-executable"><a class="header" href="#building-a-package-into-an-executable">Building a package into an executable</a></h2>
<p>To build the package, you run a <code>pen build</code> command in the package's directory.</p>
<pre><code class="language-sh">pen build
</code></pre>
<p>Then, you will see an executable file named <code>app</code> in the directory. Now, you can run it to see its output, &quot;Hello, world!&quot;</p>
<pre><code class="language-sh">./app # -&gt; Hello, world!
</code></pre>
<h2 id="next-steps-1"><a class="header" href="#next-steps-1">Next steps</a></h2>
<ul>
<li><a href="guides/creating-a-library.html">Creating a library</a></li>
<li><a href="guides/using-a-library.html">Using a library</a></li>
<li><a href="guides//references/language/syntax.html">Language syntax</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="creating-a-library"><a class="header" href="#creating-a-library">Creating a library</a></h1>
<p>This page describes how to create a library in Pen. It consists of the following steps:</p>
<ol>
<li>Create a <em>library</em> package.</li>
<li>Publish the package.</li>
</ol>
<h2 id="creating-a-library-package"><a class="header" href="#creating-a-library-package">Creating a library package</a></h2>
<p><a href="guides//references/language/packages.html#library-packages">Library packages</a> are packages imported and used by other packages.
To create it, you run a <code>pen create --library</code> command with your library's name (e.g. <code>foo</code>) in your terminal.</p>
<pre><code class="language-sh">pen create --library foo
</code></pre>
<p>Then, you should see a <code>foo</code> directory in your current directory. When you go there, you should see a <code>Foo.pen</code> source file and a <code>pen.json</code> file for <a href="guides//references/language/packages.html#package-configuration">package configuration</a>.</p>
<p><code>Foo.pen</code>:</p>
<pre><code class="language-pen">Add = \(x number, y number) number {
  x + y
}
</code></pre>
<p><code>pen.json</code>:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<p>In this example, the <code>Foo.pen</code> file contains an <code>Add</code> function that adds two numbers. And the <code>pen.json</code> configuration file defines a package type of <code>library</code> and its dependencies of none.</p>
<h2 id="publishing-a-package"><a class="header" href="#publishing-a-package">Publishing a package</a></h2>
<p>The easiest way to publish your library package is to push the package as a Git repository onto one of Git repository hosting services, such as <a href="https://github.com">GitHub</a>.</p>
<pre><code class="language-sh">git add .
git commit
git remote add origin ssh://git@github.com/your-name/foo
git push
</code></pre>
<p>Now, your package is ready for use by other packages!</p>
<h2 id="next-steps-2"><a class="header" href="#next-steps-2">Next steps</a></h2>
<ul>
<li><a href="guides/building-an-executable.html">Building an executable</a></li>
<li><a href="guides/using-a-library.html">Using a library</a></li>
<li><a href="guides//references/language/syntax.html">Language syntax</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="using-a-library"><a class="header" href="#using-a-library">Using a library</a></h1>
<p>This page describes how to use a library in Pen. It consists of the following steps:</p>
<ol>
<li>Add a library package as a dependency in another package.</li>
<li>Import functions and types from the library package.</li>
</ol>
<h2 id="modifying-package-configuration"><a class="header" href="#modifying-package-configuration">Modifying package configuration</a></h2>
<p>To use a library package, you need to add the package as a dependency in another package. To add the dependency, you modify a <code>pen.json</code> configuration file in the package adding the library package's name (e.g. <code>Foo</code>) and URL (e.g. <code>git://github.com/your-name/foo</code>) in a <code>dependencies</code> field like the following example. Note that you need to specify a <code>git</code> protocol scheme for library packages published as Git repositories. For other kinds of library packages, see <a href="guides//references/language/packages.html#package-configuration">Package configuration</a>.</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;application&quot;, // This can be any type.
  &quot;dependencies&quot;: {
    &quot;Foo&quot;: &quot;git://github.com/your-name/foo&quot;
  }
}
</code></pre>
<h2 id="importing-functions-and-types-from-a-library-package"><a class="header" href="#importing-functions-and-types-from-a-library-package">Importing functions and types from a library package</a></h2>
<p>To import functions and types from the library package, you use <code>import</code> statements in a source file of your module with a name of the library package (e.g. <code>Foo</code>) and a module name (e.g. <code>Math</code>) where functions or types you want to use are defined.</p>
<pre><code class="language-pen">import Foo'Math
</code></pre>
<p>Then, you are ready to use those functions and types with a prefix of the module name! For example, to call a function named <code>Add</code> in the <code>Math</code> module, you can write <code>Math'Add(x, y)</code>.</p>
<pre><code class="language-pen">type MyType = Math'Order

MyFunction = \(x number, y number) number {
  Math'Add(x, y)
}
</code></pre>
<h2 id="next-steps-3"><a class="header" href="#next-steps-3">Next steps</a></h2>
<ul>
<li><a href="guides/building-an-executable.html">Building an executable</a></li>
<li><a href="guides/creating-a-library.html">Creating a library</a></li>
<li><a href="guides//references/language/syntax.html">Language syntax</a>
<ul>
<li><a href="guides//references/language/syntax.html#import-statement">Import statement</a></li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="testing"><a class="header" href="#testing">Testing</a></h1>
<p>This page describes how to write and run unit tests for programs written in Pen.</p>
<p>Testing codes consists of the following steps:</p>
<ol>
<li>Write tests as <em>test</em> functions in <em>test</em> modules.</li>
<li>Run the tests with a <code>pen test</code> command.</li>
</ol>
<h2 id="writing-tests"><a class="header" href="#writing-tests">Writing tests</a></h2>
<p>You can write tests as <em>test</em> functions in <em>test</em> modules. All modules with the <code>.test.pen</code> file extension are test modules. And, all public functions in test modules are test functions. The test functions need to have a type of <code>\() none | error</code> and should return <code>error</code> values when they fail.</p>
<p>For example, to test a <code>Foo</code> function in a <code>Foo.pen</code> module, write a <code>Foo.test.pen</code> test module with the following contents.</p>
<pre><code class="language-pen">import Test'Assert
import 'Foo

CheckFoo = \() none | error {
  Assert'True(Foo'Foo() == 42)
}
</code></pre>
<h3 id="the-test-package"><a class="header" href="#the-test-package">The <code>Test</code> package</a></h3>
<p><a href="guides//references/standard-packages/test.html">The <code>Test</code> standard package</a> includes some utilities which helps you to write tests.</p>
<h2 id="running-tests"><a class="header" href="#running-tests">Running tests</a></h2>
<p>To run tests, you can run a <code>pen test</code> command in your package's directory. Then, you should see test results of test functions in test modules. The <code>pen test</code> command exits with a non-zero status code if some tests fail.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="concurrency-and-parallelism"><a class="header" href="#concurrency-and-parallelism">Concurrency and parallelism</a></h1>
<p>Concurrent programs use CPU time efficiently without being blocked on I/O or data synchronization. Parallel programs leverage multi-core CPUs to compute things in parallel faster than sequential programs.</p>
<p>This page describes how to write concurrent and/or parallel programs in Pen.</p>
<h2 id="built-ins"><a class="header" href="#built-ins">Built-ins</a></h2>
<p>Pen provides several built-in functions for concurrent and parallel programming.</p>
<h3 id="go-function"><a class="header" href="#go-function"><code>go</code> function</a></h3>
<p><a href="guides//references/language/built-ins.html#go">The <code>go</code> built-in function</a> runs a given function concurrently, and possibly in parallel.</p>
<pre><code class="language-pen">future = go(\() number {
  computeExpensive(x, y, z)
})
</code></pre>
<p>The <code>go</code> function returns a function of the same type as the given argument. The returned function returns a resulting value of the function execution. In other languages, such functions returning values computed concurrently when they are ready are also known as <a href="https://doc.rust-lang.org/std/future/trait.Future.html">futures</a> or <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promises</a>.</p>
<p>The <code>go</code> function may or may not run a given function immediately depending on its implementation. For example, <a href="guides//references/standard-packages/os.html">the standard <code>Os</code> system package</a> runs the given function in parallel if multiple CPU cores are available.</p>
<h3 id="race-function"><a class="header" href="#race-function"><code>race</code> function</a></h3>
<p><a href="guides//references/language/built-ins.html#race">The <code>race</code> built-in function</a> takes multiple lists and merge them into one by evaluating elements in each list concurrently and possibly in parallel. The resulting list contains the elements in the original lists in order of their finished times of computation. Remember that elements in lists are evaluated lazily.</p>
<pre><code class="language-pen">zs = race([[number] xs, ys])
</code></pre>
<p>This functionality is similar to concurrent queues in other imperative languages, such as <a href="https://go.dev/tour/concurrency/2">channels</a> in <a href="https://go.dev">Go</a>. Input lists to the <code>race</code> function correspond to producers of elements into the queue, and a consumer of the queue is codes that use elements in the output list.</p>
<h2 id="patterns"><a class="header" href="#patterns">Patterns</a></h2>
<h3 id="task-parallelism"><a class="header" href="#task-parallelism">Task parallelism</a></h3>
<p>The <code>go</code> function can run different codes concurrently. For example, the following code runs the functions, <code>computeA</code> and <code>computeB</code> concurrently. Runtimes of applications might execute those functions even in parallel if their system packages allow that.</p>
<pre><code class="language-pen">compute = \(x number, y number) number {
  z = go(\() number { computeA(x) })
  v = computeB(y)

  v + z
}
</code></pre>
<h3 id="data-parallelism"><a class="header" href="#data-parallelism">Data parallelism</a></h3>
<p>To run the same computation against many values of the same type, you can use recursion and the <code>go</code> function.</p>
<pre><code class="language-pen">computeMany = \(xs [number]) [number] {
  if [x, ...xs] = xs {
    y = go(\() number { foo(x()) })
    ys = computeMany(xs)

    [number y(), ...ys]
  } else {
    [number]
  }
}
</code></pre>
<p>The example above computes things in order of elements in the original list. However, you might want to see output values of concurrent computation in order of their finished times. By doing that, you can start using the output values as fast as possible without waiting for all computation to be completed. In this case, you can use the <code>race</code> function to reorder elements in the output list by their finished times.</p>
<pre><code class="language-pen">compute = \(xs [number]) [number] {
  race([[number] [number x()] for x in computeMany(xs)])
}
</code></pre>
<p>If you want to evaluate elements in multiple lists concurrently, you can simply pass the lists as an argument to the <code>race</code> function. Note that elements in the same lists are not evaluated concurrently although elements in different lists are evaluated concurrently.</p>
<pre><code class="language-pen">compute = \(xs [number], ys [number]) [number] {
  race([[number] computeMany(xs), computeMany(ys)])
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="coding-style"><a class="header" href="#coding-style">Coding style</a></h1>
<p>This page describes the common coding style of programs written in Pen.</p>
<h2 id="spacing"><a class="header" href="#spacing">Spacing</a></h2>
<p>Use 2 space characters for indentation.</p>
<pre><code class="language-pen">Foo = \(x number) number {
  if x == 0 {
    &quot;Succeeded!&quot;
  } else {
    &quot;Failed...&quot;
  }
}
</code></pre>
<h2 id="naming-convention"><a class="header" href="#naming-convention">Naming convention</a></h2>
<p>Naming is important to keep codes consistent. The language currently has the following naming conventions.</p>
<div class="table-wrapper"><table><thead><tr><th>Kind</th><th>Case style</th><th>Examples</th></tr></thead><tbody>
<tr><td>Variables</td><td>Camel case</td><td><code>fooBar</code>, <code>FooBar</code>, <code>i</code>, <code>x</code></td></tr>
<tr><td>Functions</td><td>Camel case</td><td><code>fooBar</code>, <code>FooBar</code>, <code>f</code>, <code>g</code></td></tr>
<tr><td>Types</td><td>Camel case</td><td><code>fooBar</code>, <code>FooBar</code></td></tr>
<tr><td>Modules</td><td>Camel case</td><td><code>fooBar</code>, <code>FooBar</code></td></tr>
<tr><td>Module directories</td><td>Camel case</td><td><code>fooBar</code>, <code>FooBar</code></td></tr>
<tr><td>Packages</td><td>Upper camel case</td><td><code>FooBar</code></td></tr>
</tbody></table>
</div>
<h3 id="global-and-local-names"><a class="header" href="#global-and-local-names">Global and local names</a></h3>
<p>You should use descriptive names for global functions and types. But, on the other hand, you are encouraged to use abbreviated names for local variables as long as that doesn't incur ambiguity. For example, you might use the following abbreviated names:</p>
<ul>
<li><code>i</code> for <code>index</code></li>
<li><code>c</code> for <code>requestCount</code></li>
<li><code>sys</code> for <code>system</code></li>
<li><code>ctx</code> for <code>context</code></li>
</ul>
<h3 id="acronyms"><a class="header" href="#acronyms">Acronyms</a></h3>
<p>Acronyms are treated as single words.</p>
<ul>
<li><code>Cpu</code></li>
<li><code>Ast</code></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="references"><a class="header" href="#references">References</a></h1>
<p>This chapter details language features, command line tools, and standard packages.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="language"><a class="header" href="#language">Language</a></h1>
<p>This chapter describes the Pen's syntax, and type, module and package systems.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="syntax"><a class="header" href="#syntax">Syntax</a></h1>
<p>This page describes syntax of Pen. You can compose programs building up those language constructs. See also <a href="references/language/types.html">Types</a> about syntax for specific data types.</p>
<h2 id="module"><a class="header" href="#module">Module</a></h2>
<p>Modules are sets of type and function definitions. Syntactically, a module consists of <a href="references/language/syntax.html#statements">statements</a>. See <a href="references/language/modules.html">Modules</a> about how modules themselves interact with each other.</p>
<h2 id="statements"><a class="header" href="#statements">Statements</a></h2>
<p>Statements are constructs that declare functions and types in modules.</p>
<h3 id="import-statement"><a class="header" href="#import-statement">Import statement</a></h3>
<p>It imports types and functions from another module from the same or another package.</p>
<p>See <a href="references/language/modules.html">Modules</a> for more details.</p>
<pre><code class="language-pen">import Foo'Bar
</code></pre>
<h3 id="foreign-import-statement"><a class="header" href="#foreign-import-statement">Foreign import statement</a></h3>
<p>It imports a function from a foreign language.</p>
<p>See <a href="references/language//advanced-features/ffi.html">Foreign Function Interface (FFI)</a> for more details.</p>
<pre><code class="language-pen">import foreign &quot;c&quot; foo \(number, number) number
</code></pre>
<h3 id="record-type-definition"><a class="header" href="#record-type-definition">Record type definition</a></h3>
<p>It defines a record type.</p>
<p>See <a href="references/language/types.html#records">Records</a> for more details.</p>
<pre><code class="language-pen">type foo {
  bar number
  baz string
}
</code></pre>
<h3 id="type-alias"><a class="header" href="#type-alias">Type alias</a></h3>
<p>It gives another name to a type.</p>
<pre><code class="language-pen">type foo = number | none
</code></pre>
<h3 id="function-definition"><a class="header" href="#function-definition">Function definition</a></h3>
<p>It defines a function with a given name. The right-hand side of <code>=</code> signs must be <a href="references/language/syntax.html#function">function expressions</a>.</p>
<pre><code class="language-pen">foo = \(x number, y number) number {
  x + y
}
</code></pre>
<h3 id="foreign-function-definition"><a class="header" href="#foreign-function-definition">Foreign function definition</a></h3>
<p>It defines a function exported to foreign languages.</p>
<p>See <a href="references/language//advanced-features/ffi.html">Foreign Function Interface (FFI)</a> for more details.</p>
<pre><code class="language-pen">foreign &quot;c&quot; foo = \(x number, y number) number {
  x + y
}
</code></pre>
<h2 id="block"><a class="header" href="#block">Block</a></h2>
<p>A block consists of 1 or more expressions wrapped in <code>{</code> and <code>}</code>. Values of the last expressions are treated as resulting values of the blocks.</p>
<pre><code class="language-pen">{
  foo(ctx, z)

  x + y + z
}
</code></pre>
<p>If you want to keep values of intermediate expressions for later use, you can define variables putting their names and <code>=</code> operators in front of the expressions.</p>
<pre><code class="language-pen">{
  x = 42

  ...
}
</code></pre>
<h2 id="expressions"><a class="header" href="#expressions">Expressions</a></h2>
<p>Expressions represent some computation. Expressions can be nested; expressions often contain other expressions inside.</p>
<h3 id="function-call"><a class="header" href="#function-call">Function call</a></h3>
<p>It calls a function to evaluate it with given arguments returning its result value.</p>
<pre><code class="language-pen">f(x, y)
</code></pre>
<h3 id="operators"><a class="header" href="#operators">Operators</a></h3>
<h4 id="arithmetic"><a class="header" href="#arithmetic">Arithmetic</a></h4>
<p>Arithmetic operators add, subtract, multiply, or divide a number with another.</p>
<pre><code class="language-pen">1 + 1
1 - 1
1 * 1
1 / 1
</code></pre>
<h4 id="comparison"><a class="header" href="#comparison">Comparison</a></h4>
<h5 id="equality"><a class="header" href="#equality">Equality</a></h5>
<p>Equal (<code>==</code>) and not-equal (<code>!=</code>) operators compare two values and return a boolean value indicating if they are equal or not.</p>
<pre><code class="language-pen">1 == 1
1 != 1
</code></pre>
<p>The operators can compare any types except functions and types containing them.</p>
<pre><code class="language-pen">&quot;foo&quot; == &quot;bar&quot;
foo{x: 0} == foo{x: 1}
42 != none
</code></pre>
<h5 id="ordering"><a class="header" href="#ordering">Ordering</a></h5>
<p>Order operators compare two numbers and return a boolean value indicating if the condition is correct or not.</p>
<pre><code class="language-pen">1 &lt; 1
1 &lt;= 1
1 &gt; 1
1 &gt;= 1
</code></pre>
<h4 id="boolean"><a class="header" href="#boolean">Boolean</a></h4>
<p>A <em>not</em> operator flips a boolean value.</p>
<pre><code class="language-pen">!true
</code></pre>
<p>An <em>and</em> operator returns <code>true</code> if both operands are <code>true</code>, or <code>false</code> otherwise.</p>
<pre><code class="language-pen">true &amp; false
</code></pre>
<p>An <em>or</em> operator returns <code>true</code> if either operand is <code>true</code>, or <code>false</code> otherwise.</p>
<pre><code class="language-pen">true | false
</code></pre>
<h4 id="error-handling"><a class="header" href="#error-handling">Error handling</a></h4>
<p><code>?</code> suffix operators immediately exit the current functions with operands if they are of <a href="references/language/built-ins.html#error">the <code>error</code> type</a>. Both the operands and result values of functions where the operators are used must be a union type containing <a href="references/language/built-ins.html#error">the <code>error</code> type</a>.</p>
<pre><code class="language-pen">x?
</code></pre>
<h3 id="function"><a class="header" href="#function">Function</a></h3>
<p>It creates a function.</p>
<p>First, functions declare their argument names and types (<code>x number</code> and <code>y number</code>) and their result types (<code>number</code>). After that, function bodies of <a href="references/language/syntax.html#block">blocks</a> describe how the functions compute result values.</p>
<pre><code class="language-pen">\(x number, y number) number {
  x + y
}
</code></pre>
<h3 id="conditionals"><a class="header" href="#conditionals">Conditionals</a></h3>
<h4 id="if-expression"><a class="header" href="#if-expression">If expression</a></h4>
<p>It evaluates one of <a href="references/language/syntax.html#block">blocks</a> depending on a condition of an expression of a boolean type.</p>
<ul>
<li>It evaluates the first block if a given boolean value is <code>true</code>.</li>
<li>Otherwise, it evaluates the second block.</li>
</ul>
<pre><code class="language-pen">if x {
  ...
} else {
  ...
}
</code></pre>
<h4 id="if-type-expression"><a class="header" href="#if-type-expression">If-type expression</a></h4>
<p>It evaluates one of <a href="references/language/syntax.html#block">blocks</a> depending on the type of a given expression. The expression (<code>foo()</code>) needs to be bound to a variable (<code>x</code>) and, in each block, the variable is treated as its specified type.</p>
<pre><code class="language-pen">if x = foo() as number {
  ...
} else if string | none {
  ...
} else {
  ...
}
</code></pre>
<h4 id="if-list-expression"><a class="header" href="#if-list-expression">If-list expression</a></h4>
<p>It deconstructs a list and evaluates one of two <a href="references/language/syntax.html#block">blocks</a> depending on if the list is empty or not.</p>
<ul>
<li>If a given list has 1 or more element, it evaluates the first block with <strong>a function that returns its first element</strong> (<code>x</code>) and rest of elements as a list (<code>xs</code>).</li>
<li>If the list has no element, it evaluates the second block.</li>
</ul>
<pre><code class="language-pen">if [x, ...xs] = ... {
  ...
} else {
  ...
}
</code></pre>
<h4 id="if-map-expression"><a class="header" href="#if-map-expression">If-map expression</a></h4>
<p>It gets a value for a key in a map and evaluates one of two <a href="references/language/syntax.html#block">blocks</a> depending on if the map has the key or not.</p>
<ul>
<li>If a value for a key (<code>key</code>) is found, it evaluates the first block with the value (<code>value</code>).</li>
<li>If the map has no such key, it evaluates the second block.</li>
</ul>
<pre><code class="language-pen">if value = xs[key] {
  ...
} else {
  ...
}
</code></pre>
<h3 id="loop"><a class="header" href="#loop">Loop</a></h3>
<h4 id="list-comprehension"><a class="header" href="#list-comprehension">List comprehension</a></h4>
<p>It iterates over elements in a given list and generates a new list with elements of a given expression.</p>
<pre><code class="language-pen">[number f(x) for x in xs]
</code></pre>
<p>You can also iterate keys and values in a map.</p>
<pre><code class="language-pen">[number f(key, value) for key, value in map]
</code></pre>
<h2 id="comment"><a class="header" href="#comment">Comment</a></h2>
<p>Comments start with <code>#</code> and end with new-line characters.</p>
<pre><code class="language-pen"># This is a comment.
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="types"><a class="header" href="#types">Types</a></h1>
<p>This page describes different data types in Pen.</p>
<h2 id="number"><a class="header" href="#number">Number</a></h2>
<p>It represents a real number. It is implemented as a 64-bit floating point number of <a href="https://en.wikipedia.org/wiki/Double-precision_floating-point_format">IEEE 754</a>.</p>
<pre><code class="language-pen">number
</code></pre>
<h3 id="literals"><a class="header" href="#literals">Literals</a></h3>
<pre><code class="language-pen">3.14
-42
</code></pre>
<h2 id="boolean-1"><a class="header" href="#boolean-1">Boolean</a></h2>
<p>It is a boolean value of <code>true</code> or <code>false</code>.</p>
<pre><code class="language-pen">boolean
</code></pre>
<h3 id="literals-1"><a class="header" href="#literals-1">Literals</a></h3>
<pre><code class="language-pen">true
false
</code></pre>
<h2 id="none"><a class="header" href="#none">None</a></h2>
<p>It represents a missing value. It has only a single value of <code>none</code>.</p>
<pre><code class="language-pen">none
</code></pre>
<h3 id="literals-2"><a class="header" href="#literals-2">Literals</a></h3>
<pre><code class="language-pen">none
</code></pre>
<h2 id="string"><a class="header" href="#string">String</a></h2>
<p>It is a byte array.</p>
<pre><code class="language-pen">string
</code></pre>
<h3 id="literals-3"><a class="header" href="#literals-3">Literals</a></h3>
<p>String literals are sequences of bytes. They are often used to represent texts encoded in <a href="https://en.wikipedia.org/wiki/UTF-8">UTF-8</a>.</p>
<pre><code class="language-pen">&quot;foo&quot;
</code></pre>
<h4 id="escape-sequences"><a class="header" href="#escape-sequences">Escape sequences</a></h4>
<p>String literals can contain the following escape sequences.</p>
<div class="table-wrapper"><table><thead><tr><th>Escape sequence</th><th>Name</th></tr></thead><tbody>
<tr><td><code>\n</code></td><td>New line</td></tr>
<tr><td><code>\r</code></td><td>Carriage return</td></tr>
<tr><td><code>\t</code></td><td>Tab</td></tr>
<tr><td><code>\&quot;</code></td><td>Double quote</td></tr>
<tr><td><code>\\</code></td><td>Backslash</td></tr>
<tr><td><code>\x9f</code></td><td>Byte</td></tr>
</tbody></table>
</div>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<p>A function represents reusable computation with arguments and a result.</p>
<p>Functions represent not only pure computation but may also execute side effects, such as I/O.</p>
<pre><code class="language-pen">\(number, number) number
</code></pre>
<h3 id="literals-4"><a class="header" href="#literals-4">Literals</a></h3>
<pre><code class="language-pen">\(x number, y number) number {
  x + y
}
</code></pre>
<h2 id="lists"><a class="header" href="#lists">Lists</a></h2>
<p>It is a list of values. Its type contains an element type between <code>[</code> and <code>]</code>.</p>
<pre><code class="language-pen">[number]
</code></pre>
<h3 id="literals-5"><a class="header" href="#literals-5">Literals</a></h3>
<p>A list literal contains its element type and elements as expressions.</p>
<pre><code class="language-pen">[number]
[number 1]
[number 1, 2, 3]
</code></pre>
<p>You can create new lists from existing ones by spreading elements of the old ones prefixed by <code>...</code> into the new ones.</p>
<pre><code class="language-pen">[number x, ...xs]
</code></pre>
<p>Note that <strong>expressions within list literals are evaluated lazily</strong>; they are evaluated only if their values are required.</p>
<h2 id="maps"><a class="header" href="#maps">Maps</a></h2>
<p>It is a map from keys to values. Its type contains key and value types between <code>{</code> and <code>}</code> separated by <code>:</code>.</p>
<pre><code class="language-pen">{string: number}
</code></pre>
<h3 id="literals-6"><a class="header" href="#literals-6">Literals</a></h3>
<p>A map literal contains its key and value types and key-value pairs as expressions.</p>
<pre><code class="language-pen">{string: number}
{string: number &quot;foo&quot;: 1}
{string: number &quot;foo&quot;: 1, &quot;bar&quot;: 2}
</code></pre>
<p>You can create new maps from existing ones by spreading entries of the old ones prefixed by <code>...</code> into the new ones.</p>
<pre><code class="language-pen">{string: number ...map, &quot;foo&quot;: 1}
</code></pre>
<p>You can also delete a key from a map omitting its value.</p>
<pre><code class="language-pen">{string: number ...map, &quot;foo&quot;}
</code></pre>
<h2 id="records"><a class="header" href="#records">Records</a></h2>
<p>It combines multiple types into a single type. Each field of a record type is composed of its name and type.</p>
<p>Fields are not accessible outside modules where they are defined by default.</p>
<pre><code class="language-pen">type person {
  name string
  age number
}
</code></pre>
<p>To expose fields as well as the type itself to other modules, you need to capitalize their names.</p>
<pre><code class="language-pen">type Person {
  Name string
  Age number
}
</code></pre>
<h3 id="literals-7"><a class="header" href="#literals-7">Literals</a></h3>
<p>Record values are constructed using record literals containing their field names and values separated by commas.</p>
<pre><code class="language-pen">person{name: &quot;foo&quot;, age: 42}
</code></pre>
<p>You can also create new records from existing ones spreading fields of the old ones into the new ones.</p>
<pre><code class="language-pen">person{...one, name: &quot;bar&quot;}
</code></pre>
<p>You can access field values by appending their names with <code>.</code> prefixes to expressions of record types.</p>
<pre><code class="language-pen">john.name
</code></pre>
<h2 id="unions"><a class="header" href="#unions">Unions</a></h2>
<p>It is a union of multiple types.</p>
<p>For example, the type below represents values that can be either <code>number</code> or <code>none</code>.</p>
<pre><code class="language-pen">number | none
</code></pre>
<h2 id="any"><a class="header" href="#any">Any</a></h2>
<p>Literally, it's an <em>any</em> type. Any values can be converted to the type.</p>
<pre><code class="language-pen">any
</code></pre>
<h2 id="error"><a class="header" href="#error">Error</a></h2>
<p>It is an error. You can create error values by calling <a href="references/language/built-ins.html#error">the <code>error</code> built-in function</a>. See also <a href="references/language/syntax.html#error-handling">Error handling</a>.</p>
<pre><code class="language-pen">error
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="built-ins-1"><a class="header" href="#built-ins-1">Built-ins</a></h1>
<p>Built-in types and functions are ones implicitly defined in every module.</p>
<h2 id="types-1"><a class="header" href="#types-1">Types</a></h2>
<p>See <a href="references/language/types.html">Types</a>.</p>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="size"><a class="header" href="#size"><code>size</code></a></h3>
<p>It calculates a size of a list or a map. It is generic and you can apply it to any list and map types.</p>
<p>Its time complexity is O(n) for lists and O(1) for maps.</p>
<pre><code class="language-pen">\(list [a]) number
\(map {a: b}) number
</code></pre>
<h3 id="error-1"><a class="header" href="#error-1"><code>error</code></a></h3>
<p>It creates an error with its source information.</p>
<pre><code class="language-pen">\(s any) error
</code></pre>
<h3 id="source"><a class="header" href="#source"><code>source</code></a></h3>
<p>It extracts source information from an error.</p>
<pre><code class="language-pen">\(e error) any
</code></pre>
<h3 id="debug"><a class="header" href="#debug"><code>debug</code></a></h3>
<p>It prints a debug message given as an argument.</p>
<p>Note that behavior of this function can change among system packages. <strong>You may not even see any messages with system packages whose systems do not have any consoles.</strong></p>
<pre><code class="language-pen">\(message string) none
</code></pre>
<h3 id="go"><a class="header" href="#go"><code>go</code></a></h3>
<p>It executes a function concurrently. Its return value is a future represented as a function that returns a result of the executed function.</p>
<pre><code class="language-pen">\(\() a) \() a
</code></pre>
<h3 id="race"><a class="header" href="#race"><code>race</code></a></h3>
<p>It merges multiple lists into one by evaluating elements in the lists concurrently. Elements in each list are evaluated sequentially in order.</p>
<p>This function corresponds to <a href="https://go.dev/blog/pipelines#fan-out-fan-in">the fan-in concurrency pattern</a> in other languages where results of concurrent computation in multiple queues are merged into a queue.</p>
<pre><code class="language-pen">\([[a]]) [a]
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="modules"><a class="header" href="#modules">Modules</a></h1>
<p>Modules are sets of functions and types. Using modules, you can split large programs into smaller chunks.</p>
<p>Each source file suffixed with a <code>.pen</code> file extension composes a module. Modules can import functions and types from other modules.</p>
<h2 id="exporting-functions-and-types-from-modules"><a class="header" href="#exporting-functions-and-types-from-modules">Exporting functions and types from modules</a></h2>
<p>You can name functions and types in an upper camel case for them to be accessible from other modules.</p>
<pre><code class="language-pen">type Foo {
  ...
}

type Bar = ...

Foo = \() number {
  ...
}
</code></pre>
<h2 id="importing-functions-and-types-from-modules"><a class="header" href="#importing-functions-and-types-from-modules">Importing functions and types from modules</a></h2>
<p>In order to import functions and types from other modules, place <a href="references/language//references/language/syntax.html#import-statement">import statements</a> at the top of modules.</p>
<p>The first components in the statements are names of external packages you declare in <a href="references/language/packages.html#package-configuration">package configuration files</a> (<code>Foo</code>.) They are omitted if imported modules are in the same packages. The rest of the components are directory names where the modules exist (<code>Bar</code>) and the modules' filenames without their file extensions (<code>Baz</code> for <code>Baz.pen</code>.)</p>
<pre><code class="language-pen">import Foo'Bar'Baz
</code></pre>
<p>Then, you can access exported members of the modules with their prefixes.</p>
<pre><code class="language-pen">type foo = Baz'Type

bar = \(x number) number {
  Baz'Function(x)
}
</code></pre>
<h3 id="module-names"><a class="header" href="#module-names">Module names</a></h3>
<h4 id="modules-in-the-same-package"><a class="header" href="#modules-in-the-same-package">Modules in the same package</a></h4>
<p>Modules in the same package are referenced by their paths relative to a root directory of the package.</p>
<p>For example, a module of a file at <code>&lt;package directory&gt;/Foo/Bar.pen</code> is imported as below.</p>
<pre><code class="language-pen">import 'Foo'Bar
</code></pre>
<h4 id="modules-in-other-packages"><a class="header" href="#modules-in-other-packages">Modules in other packages</a></h4>
<p>Modules in other packages are referenced by their package names defined in <a href="references/language/packages.html#package-configuration">package configuration files</a> and module paths.</p>
<p>For example, a module of a file at <code>&lt;package directory&gt;/Bar/Baz.pen</code> in a package <code>Foo</code> is imported as below.</p>
<pre><code class="language-pen">import Foo'Bar'Baz
</code></pre>
<h4 id="private-modules"><a class="header" href="#private-modules">Private modules</a></h4>
<p>For modules to be private and not accessible from other packages, you can name them in lower camel case (e.g. <code>fooBar</code>.)</p>
<h3 id="custom-prefixes"><a class="header" href="#custom-prefixes">Custom prefixes</a></h3>
<p>Imported modules can have custom prefixes given different names after the <code>as</code> keywords.</p>
<pre><code class="language-pen">import Foo'Bar'Baz as Blah
</code></pre>
<h3 id="unqualified-import"><a class="header" href="#unqualified-import">Unqualified import</a></h3>
<p>You can import functions and types without prefixes by putting their names between <code>{</code> and <code>}</code> in <a href="references/language//references/language/syntax.html#import-statement">import statements</a>. This is especially useful when module names and imported functions or types have the same names like <code>import 'MyType { MyType }</code>.</p>
<pre><code class="language-pen">import Foo'Bar { Foo, Bar }

type Baz {
  foo Foo
}

Blah = \() number {
  Bar()
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="packages"><a class="header" href="#packages">Packages</a></h1>
<p>Packages are sets of <a href="references/language//references/language/modules.html">modules</a>. Like modules, packages can import other packages specifying them in <a href="references/language/packages.html#package-configuration">their configurations</a>.</p>
<h2 id="what-composes-a-package"><a class="header" href="#what-composes-a-package">What composes a package?</a></h2>
<p>The following entities compose packages.</p>
<ul>
<li>Standard packages bundled in <a href="references/language//introduction/install.html">installation</a> of the language</li>
<li>Remote repositories managed by version control systems (VCS)
<ul>
<li>Currently, Pen supports only <a href="https://git-scm.com/">Git</a> as a VCS.</li>
</ul>
</li>
<li>Directories with <a href="references/language/packages.html#package-configuration">package configuration files</a> on file systems</li>
</ul>
<p>During builds of packages, Pen's build system automatically download and initialize their dependency packages based on their URLs.</p>
<h2 id="package-types"><a class="header" href="#package-types">Package types</a></h2>
<p>There are 3 package types: application, library, and system. Those types are specified in <a href="references/language/packages.html#package-configuration">package configuration files</a>.</p>
<h3 id="application-packages"><a class="header" href="#application-packages">Application packages</a></h3>
<p>Application packages build applications often as executable files. Every application package must have a <code>main.pen</code> module file at its top directory. The main module has a <code>main</code> function that receives an argument of a <code>context</code> type and returns a <code>none</code> type. The <code>context</code> type is a record type containing context values of system packages with their field names of package names. For example, given system packages named <code>Http</code> and <code>Os</code>, a main function looks like the following.</p>
<pre><code class="language-pen">main = \(ctx context) none {
  s = fetch(ctx.Http, &quot;https://pen-lang.org/&quot;)
  print(ctx.Os, s)

  none
}
</code></pre>
<p>Every application package must specify one and only one <a href="references/language/packages.html#system-packages">system package</a> that links applications (e.g. the <code>Os</code> standard system package) in its <a href="references/language/packages.html#package-configuration">package configuration file</a>. However, application packages can specify system packages that do not link applications (e.g. the <code>Http</code> system package in the example above) as many as possible.</p>
<h3 id="library-packages"><a class="header" href="#library-packages">Library packages</a></h3>
<p>Library packages contain functions and types that have <em>no</em> side effects. They are imported and used by other packages.</p>
<h3 id="system-packages"><a class="header" href="#system-packages">System packages</a></h3>
<p>System packages contain functions and types that have side effects to provide system interfaces to application packages. The language currently provides the two standard system packages of <code>Os</code> and <code>OsSync</code>.</p>
<p>Although they can be imported by library packages as well as application packages, then they are expected not to cause any side effects.</p>
<p>If you want to write your own system packages, see <a href="references/language//advanced-features/writing-system-packages.html">Writing system packages</a>.</p>
<h2 id="package-configuration"><a class="header" href="#package-configuration">Package configuration</a></h2>
<p>Each package has its configuration file named <code>pen.json</code> in a <a href="https://www.json.org/json-en.html">JSON</a> format at its top directory. The JSON file has the following fields.</p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Required</th><th>Description</th></tr></thead><tbody>
<tr><td><code>type</code></td><td>Yes</td><td>Package type (either <code>application</code>, <code>library</code>, or <code>system</code>)</td></tr>
<tr><td><code>dependencies</code></td><td>Yes</td><td>Map of package names to their URLs</td></tr>
</tbody></table>
</div>
<p>Package URLs have different protocol schemes depending on where they are located.</p>
<ul>
<li>Standard packages: <code>pen</code></li>
<li>Git repositories: <code>git</code></li>
<li>Directories on file systems: none</li>
</ul>
<h3 id="examples"><a class="header" href="#examples">Examples</a></h3>
<h4 id="application"><a class="header" href="#application">Application</a></h4>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;application&quot;,
  &quot;dependencies&quot;: {
    &quot;Os&quot;: &quot;pen:///os&quot;,
    &quot;Core&quot;: &quot;pen:///core&quot;,
    &quot;Foo&quot;: &quot;git://github.com/foo/foo&quot;,
    &quot;Bar&quot;: &quot;../bar&quot;
  }
}
</code></pre>
<h4 id="library"><a class="header" href="#library">Library</a></h4>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {
    &quot;Core&quot;: &quot;pen:///core&quot;,
    &quot;Foo&quot;: &quot;git://github.com/foo/foo&quot;,
    &quot;Bar&quot;: &quot;../bar&quot;
  }
}
</code></pre>
<h4 id="system"><a class="header" href="#system">System</a></h4>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;system&quot;,
  &quot;dependencies&quot;: {
    &quot;Core&quot;: &quot;pen:///core&quot;,
    &quot;Foo&quot;: &quot;git://github.com/foo/foo&quot;,
    &quot;Bar&quot;: &quot;../bar&quot;
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="command-line-tools"><a class="header" href="#command-line-tools">Command line tools</a></h1>
<p>The <code>pen</code> command has the following sub-commands.</p>
<p>For more information, see its help message by running <code>pen --help</code>.</p>
<h2 id="build-command"><a class="header" href="#build-command"><code>build</code> command</a></h2>
<p>It builds a package in the current directory.</p>
<pre><code class="language-sh">pen build
</code></pre>
<h2 id="create-command"><a class="header" href="#create-command"><code>create</code> command</a></h2>
<p>It creates a package of a given kind in a specified directory.</p>
<h3 id="creating-an-application-package-1"><a class="header" href="#creating-an-application-package-1">Creating an application package</a></h3>
<pre><code class="language-sh">pen create foo
</code></pre>
<h3 id="creating-a-library-package-1"><a class="header" href="#creating-a-library-package-1">Creating a library package</a></h3>
<pre><code class="language-sh">pen create --library foo
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="standard-packages"><a class="header" href="#standard-packages">Standard packages</a></h1>
<p>Standard packages provide common utility functions and system interfaces. They are installed together with the <code>pen</code> command on your system. This chapter describes their APIs and how to use them.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="core-package"><a class="header" href="#core-package"><code>Core</code> package</a></h1>
<p>This package provides common algorithms and data structures.</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;
}
</code></pre>
<h2 id="install-2"><a class="header" href="#install-2">Install</a></h2>
<pre><code class="language-json">{
  &quot;dependencies&quot;: {
    &quot;Core&quot;: &quot;pen:///core&quot;
  } 
}
</code></pre>
<h2 id="corebit-module"><a class="header" href="#corebit-module"><code>Core'Bit</code> module</a></h2>
<p>This module provides bitwise operations.</p>
<p>Most functions defined in this module take arguments of 64-bit integers.
They can be converted from and into integers represented in IEEE-754 of a
<code>number</code> type.</p>
<h3 id="types-2"><a class="header" href="#types-2">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-2"><a class="header" href="#functions-2">Functions</a></h3>
<h4 id="and"><a class="header" href="#and"><code>And</code></a></h4>
<p>Calculate bitwise &quot;and&quot; given two 64-bit integers.</p>
<pre><code class="language-pen">\(x number, y number) number
</code></pre>
<h4 id="or"><a class="header" href="#or"><code>Or</code></a></h4>
<p>Calculate bitwise &quot;or&quot; given two 64-bit integers.</p>
<pre><code class="language-pen">\(x number, y number) number
</code></pre>
<h4 id="xor"><a class="header" href="#xor"><code>Xor</code></a></h4>
<p>Calculate bitwise exclusive-&quot;or&quot; given two 64-bit integers.</p>
<pre><code class="language-pen">\(x number, y number) number
</code></pre>
<h4 id="not"><a class="header" href="#not"><code>Not</code></a></h4>
<p>Calculate bitwise &quot;not&quot; given two 64-bit integers.</p>
<pre><code class="language-pen">\(x number) number
</code></pre>
<h4 id="leftshift"><a class="header" href="#leftshift"><code>LeftShift</code></a></h4>
<p>Calculate unsigned left shift given a 64-bit integer.</p>
<pre><code class="language-pen">\(x number, n number) number
</code></pre>
<h4 id="rightshift"><a class="header" href="#rightshift"><code>RightShift</code></a></h4>
<p>Calculate unsigned right shift given a 64-bit integer.</p>
<pre><code class="language-pen">\(x number, n number) number
</code></pre>
<h4 id="tointeger64"><a class="header" href="#tointeger64"><code>ToInteger64</code></a></h4>
<p>Convert an integer in IEEE-754 to a 64-bit integer.</p>
<pre><code class="language-pen">\(x number) number
</code></pre>
<h4 id="frominteger64"><a class="header" href="#frominteger64"><code>FromInteger64</code></a></h4>
<p>Convert a 64-bit integer to an integer in IEEE-754.</p>
<pre><code class="language-pen">\(x number) number
</code></pre>
<h2 id="coreboolean-module"><a class="header" href="#coreboolean-module"><code>Core'Boolean</code> module</a></h2>
<p>This module provides common boolean operations.</p>
<h3 id="types-3"><a class="header" href="#types-3">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-3"><a class="header" href="#functions-3">Functions</a></h3>
<h4 id="any-1"><a class="header" href="#any-1"><code>Any</code></a></h4>
<p>Return true if any of given booleans are true or false otherwise.</p>
<pre><code class="language-pen">\(bs [boolean]) boolean
</code></pre>
<h4 id="all"><a class="header" href="#all"><code>All</code></a></h4>
<p>Return true if all of given booleans are true or false otherwise.</p>
<pre><code class="language-pen">\(bs [boolean]) boolean
</code></pre>
<h2 id="corecharacter-module"><a class="header" href="#corecharacter-module"><code>Core'Character</code> module</a></h2>
<h3 id="types-4"><a class="header" href="#types-4">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-4"><a class="header" href="#functions-4">Functions</a></h3>
<h4 id="fromcodepoint"><a class="header" href="#fromcodepoint"><code>FromCodePoint</code></a></h4>
<pre><code class="language-pen">\(n number) string
</code></pre>
<h4 id="tocodepoint"><a class="header" href="#tocodepoint"><code>ToCodePoint</code></a></h4>
<pre><code class="language-pen">\(s string) number
</code></pre>
<h2 id="corelist-module"><a class="header" href="#corelist-module"><code>Core'List</code> module</a></h2>
<p>This module provides common list operations.</p>
<h3 id="types-5"><a class="header" href="#types-5">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-5"><a class="header" href="#functions-5">Functions</a></h3>
<h4 id="first"><a class="header" href="#first"><code>First</code></a></h4>
<p>Get the first element in a list. If a list is empty, it returns a fallback value.</p>
<pre><code class="language-pen">\(xs [any], fallback any) any
</code></pre>
<h4 id="last"><a class="header" href="#last"><code>Last</code></a></h4>
<p>Get the last element in a list. If a list is empty, it returns a fallback value.</p>
<pre><code class="language-pen">\(xs [any], fallback any) any
</code></pre>
<h4 id="tonumbers"><a class="header" href="#tonumbers"><code>ToNumbers</code></a></h4>
<p>Convert a list of an <code>any</code> type to one of a <code>number</code> type skipping non-<code>number</code> types.</p>
<pre><code class="language-pen">\(xs [any]) [number]
</code></pre>
<h4 id="tostrings"><a class="header" href="#tostrings"><code>ToStrings</code></a></h4>
<p>Convert a list of an <code>any</code> type to one of a <code>string</code> type skipping non-<code>string</code> types.</p>
<pre><code class="language-pen">\(xs [any]) [string]
</code></pre>
<h4 id="tobooleans"><a class="header" href="#tobooleans"><code>ToBooleans</code></a></h4>
<p>Convert a list of an <code>any</code> type to one of a <code>boolean</code> type skipping non-<code>boolean</code> types.</p>
<pre><code class="language-pen">\(xs [any]) [boolean]
</code></pre>
<h2 id="corenumber-module"><a class="header" href="#corenumber-module"><code>Core'Number</code> module</a></h2>
<p>This module provides common number operations.</p>
<h3 id="types-6"><a class="header" href="#types-6">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-6"><a class="header" href="#functions-6">Functions</a></h3>
<h4 id="absolute"><a class="header" href="#absolute"><code>Absolute</code></a></h4>
<p>Calculate an absolute value.</p>
<pre><code class="language-pen">\(x number) number
</code></pre>
<h4 id="ceil"><a class="header" href="#ceil"><code>Ceil</code></a></h4>
<p>Calculate a ceil value.</p>
<pre><code class="language-pen">\(x number) number
</code></pre>
<h4 id="epsilon"><a class="header" href="#epsilon"><code>Epsilon</code></a></h4>
<p>Machine epsilon</p>
<pre><code class="language-pen">\() number
</code></pre>
<h4 id="exponential"><a class="header" href="#exponential"><code>Exponential</code></a></h4>
<p>Calculate an exponential of a number.</p>
<pre><code class="language-pen">\(x number) number
</code></pre>
<h4 id="floor"><a class="header" href="#floor"><code>Floor</code></a></h4>
<p>Calculate a floor value.</p>
<pre><code class="language-pen">\(x number) number
</code></pre>
<h4 id="fraction"><a class="header" href="#fraction"><code>Fraction</code></a></h4>
<p>Calculate a fraction value of a number.</p>
<pre><code class="language-pen">\(x number) number
</code></pre>
<h4 id="infinity"><a class="header" href="#infinity"><code>Infinity</code></a></h4>
<p>Infinity</p>
<pre><code class="language-pen">\() number
</code></pre>
<h4 id="isnan"><a class="header" href="#isnan"><code>IsNan</code></a></h4>
<p>Check if a number is NaN.</p>
<pre><code class="language-pen">\(x number) boolean
</code></pre>
<h4 id="maximum"><a class="header" href="#maximum"><code>Maximum</code></a></h4>
<p>Calculate a maximum.</p>
<pre><code class="language-pen">\(x number, y number) number
</code></pre>
<h4 id="minimum"><a class="header" href="#minimum"><code>Minimum</code></a></h4>
<p>Calculate a minimum.</p>
<pre><code class="language-pen">\(x number, y number) number
</code></pre>
<h4 id="nan"><a class="header" href="#nan"><code>Nan</code></a></h4>
<p>NaN</p>
<pre><code class="language-pen">\() number
</code></pre>
<h4 id="parse"><a class="header" href="#parse"><code>Parse</code></a></h4>
<p>Parse a number.</p>
<pre><code class="language-pen">\(s string) number | error
</code></pre>
<h4 id="power"><a class="header" href="#power"><code>Power</code></a></h4>
<p>Calculate a power.</p>
<pre><code class="language-pen">\(base number, exponent number) number
</code></pre>
<h4 id="range"><a class="header" href="#range"><code>Range</code></a></h4>
<p>Create a list of numbers from a minimum to a maximum.</p>
<pre><code class="language-pen">\(minimum number, maximum number) [number]
</code></pre>
<h4 id="remainder"><a class="header" href="#remainder"><code>Remainder</code></a></h4>
<p>Calculate a remainder.</p>
<pre><code class="language-pen">\(dividend number, divisor number) number
</code></pre>
<h4 id="round"><a class="header" href="#round"><code>Round</code></a></h4>
<p>Round a number.</p>
<pre><code class="language-pen">\(x number) number
</code></pre>
<h4 id="sequence"><a class="header" href="#sequence"><code>Sequence</code></a></h4>
<p>Create a list of numbers from 1 to a maximum value.</p>
<pre><code class="language-pen">\(maximum number) [number]
</code></pre>
<h4 id="squareroot"><a class="header" href="#squareroot"><code>SquareRoot</code></a></h4>
<p>Calculate a square root.</p>
<pre><code class="language-pen">\(x number) number
</code></pre>
<h4 id="string-1"><a class="header" href="#string-1"><code>String</code></a></h4>
<p>Convert a number into its string representation.</p>
<pre><code class="language-pen">\(x number) string
</code></pre>
<h4 id="sum"><a class="header" href="#sum"><code>Sum</code></a></h4>
<p>Sum up numbers.</p>
<pre><code class="language-pen">\(xs [number]) number
</code></pre>
<h4 id="truncate"><a class="header" href="#truncate"><code>Truncate</code></a></h4>
<p>Return an integer value of a number.</p>
<pre><code class="language-pen">\(x number) number
</code></pre>
<h2 id="corestring-module"><a class="header" href="#corestring-module"><code>Core'String</code> module</a></h2>
<p>This module provides common string operations.</p>
<h3 id="types-7"><a class="header" href="#types-7">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-7"><a class="header" href="#functions-7">Functions</a></h3>
<h4 id="concatenate"><a class="header" href="#concatenate"><code>Concatenate</code></a></h4>
<p>Concatenate strings.</p>
<pre><code class="language-pen">\(strings [string]) string
</code></pre>
<h4 id="join"><a class="header" href="#join"><code>Join</code></a></h4>
<p>Join strings with a separator.</p>
<pre><code class="language-pen">\(strings [string], separator string) string
</code></pre>
<h4 id="hasprefix"><a class="header" href="#hasprefix"><code>HasPrefix</code></a></h4>
<p>Check if a string has a prefix.</p>
<pre><code class="language-pen">\(s string, prefix string) boolean
</code></pre>
<h2 id="corestringbyte-module"><a class="header" href="#corestringbyte-module"><code>Core'String'Byte</code> module</a></h2>
<p>This module provides operations for strings as byte arrays.</p>
<h3 id="types-8"><a class="header" href="#types-8">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-8"><a class="header" href="#functions-8">Functions</a></h3>
<h4 id="length"><a class="header" href="#length"><code>Length</code></a></h4>
<p>Return a length of a string.</p>
<pre><code class="language-pen">\(s string) number
</code></pre>
<h4 id="slice"><a class="header" href="#slice"><code>Slice</code></a></h4>
<p>Slice a string.</p>
<pre><code class="language-pen">\(s string, start number, end number) string
</code></pre>
<h2 id="corestringbyteview-module"><a class="header" href="#corestringbyteview-module"><code>Core'String'Byte'View</code> module</a></h2>
<p>This module provides views of strings as byte arrays.
By using those views, you can apply operations to strings without copying them.</p>
<h3 id="types-9"><a class="header" href="#types-9">Types</a></h3>
<h4 id="view"><a class="header" href="#view"><code>View</code></a></h4>
<p>A view of a string</p>
<pre><code class="language-pen">type View {
  # ...
}
</code></pre>
<h3 id="functions-9"><a class="header" href="#functions-9">Functions</a></h3>
<h4 id="new"><a class="header" href="#new"><code>New</code></a></h4>
<p>Create a view of a string.</p>
<pre><code class="language-pen">\(s string) View
</code></pre>
<h4 id="viewee"><a class="header" href="#viewee"><code>Viewee</code></a></h4>
<p>Get an original string.</p>
<pre><code class="language-pen">\(v View) string
</code></pre>
<h4 id="start"><a class="header" href="#start"><code>Start</code></a></h4>
<p>Get a start index of a view.</p>
<pre><code class="language-pen">\(v View) number
</code></pre>
<h4 id="end"><a class="header" href="#end"><code>End</code></a></h4>
<p>Get an end index of a view.</p>
<pre><code class="language-pen">\(v View) number
</code></pre>
<h4 id="hasprefix-1"><a class="header" href="#hasprefix-1"><code>HasPrefix</code></a></h4>
<p>Check if a string has a prefix.</p>
<pre><code class="language-pen">\(v View, s string) boolean
</code></pre>
<h4 id="length-1"><a class="header" href="#length-1"><code>Length</code></a></h4>
<p>Get a length of a view.</p>
<pre><code class="language-pen">\(v View) number
</code></pre>
<h4 id="seek"><a class="header" href="#seek"><code>Seek</code></a></h4>
<p>Move a start index forward.</p>
<pre><code class="language-pen">\(v View, n number) View
</code></pre>
<h4 id="slice-1"><a class="header" href="#slice-1"><code>Slice</code></a></h4>
<p>Slice a view.</p>
<pre><code class="language-pen">\(v View, start number, end number) View
</code></pre>
<h4 id="tostring"><a class="header" href="#tostring"><code>ToString</code></a></h4>
<p>Convert a view into a string.</p>
<pre><code class="language-pen">\(v View) string
</code></pre>
<h2 id="corestringutf8-module"><a class="header" href="#corestringutf8-module"><code>Core'String'Utf8</code> module</a></h2>
<p>This module provides operations for strings encoded in UTF-8.</p>
<h3 id="types-10"><a class="header" href="#types-10">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-10"><a class="header" href="#functions-10">Functions</a></h3>
<h4 id="characters"><a class="header" href="#characters"><code>Characters</code></a></h4>
<p>Split a string into characters.</p>
<pre><code class="language-pen">\(s string) [string]
</code></pre>
<h4 id="contains"><a class="header" href="#contains"><code>Contains</code></a></h4>
<p>Check if a string contains a pattern.</p>
<pre><code class="language-pen">\(s string, pat string) boolean
</code></pre>
<h4 id="find"><a class="header" href="#find"><code>Find</code></a></h4>
<p>Find an index for a pattern in a string.</p>
<pre><code class="language-pen">\(s string, pat string) number | none
</code></pre>
<h4 id="hasprefix-2"><a class="header" href="#hasprefix-2"><code>HasPrefix</code></a></h4>
<p>Checks if a string has a prefix..</p>
<pre><code class="language-pen">\(s string, pat string) boolean
</code></pre>
<h4 id="hassuffix"><a class="header" href="#hassuffix"><code>HasSuffix</code></a></h4>
<p>Checks if a string has a suffix..</p>
<pre><code class="language-pen">\(s string, pat string) boolean
</code></pre>
<h4 id="length-2"><a class="header" href="#length-2"><code>Length</code></a></h4>
<p>Return a length of a string.</p>
<pre><code class="language-pen">\(s string) number
</code></pre>
<h4 id="replace"><a class="header" href="#replace"><code>Replace</code></a></h4>
<p>Replace a pattern in a string.</p>
<pre><code class="language-pen">\(s string, pattern string, replacement string) string
</code></pre>
<h4 id="slice-2"><a class="header" href="#slice-2"><code>Slice</code></a></h4>
<p>Slice a string.</p>
<pre><code class="language-pen">\(s string, start number, end number) string
</code></pre>
<h4 id="split"><a class="header" href="#split"><code>Split</code></a></h4>
<p>Split a string by a pattern.</p>
<pre><code class="language-pen">\(s string, pat string) [string]
</code></pre>
<h4 id="tolowercase"><a class="header" href="#tolowercase"><code>ToLowercase</code></a></h4>
<p>Convert a string into lowercase.</p>
<pre><code class="language-pen">\(s string) string
</code></pre>
<h4 id="touppercase"><a class="header" href="#touppercase"><code>ToUppercase</code></a></h4>
<p>Convert a string into uppercase.</p>
<pre><code class="language-pen">\(s string) string
</code></pre>
<h4 id="trim"><a class="header" href="#trim"><code>Trim</code></a></h4>
<p>Trim leading and trailing spaces.</p>
<pre><code class="language-pen">\(s string) string
</code></pre>
<h4 id="trimend"><a class="header" href="#trimend"><code>TrimEnd</code></a></h4>
<p>Trim trailing spaces.</p>
<pre><code class="language-pen">\(s string) string
</code></pre>
<h4 id="trimendmatches"><a class="header" href="#trimendmatches"><code>TrimEndMatches</code></a></h4>
<p>Trim trailing patterns.</p>
<pre><code class="language-pen">\(s string, pat string) string
</code></pre>
<h4 id="trimmatches"><a class="header" href="#trimmatches"><code>TrimMatches</code></a></h4>
<p>Trim leading and trailing patterns.</p>
<pre><code class="language-pen">\(s string, pat string) string
</code></pre>
<h4 id="trimstart"><a class="header" href="#trimstart"><code>TrimStart</code></a></h4>
<p>Trim leading spaces.</p>
<pre><code class="language-pen">\(s string) string
</code></pre>
<h4 id="trimstartmatches"><a class="header" href="#trimstartmatches"><code>TrimStartMatches</code></a></h4>
<p>Trim leading patterns.</p>
<pre><code class="language-pen">\(s string, pat string) string
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="flag-package"><a class="header" href="#flag-package"><code>Flag</code> package</a></h1>
<p>This package provides command-line flag parsing.</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;
}
</code></pre>
<h2 id="install-3"><a class="header" href="#install-3">Install</a></h2>
<pre><code class="language-json">{
  &quot;dependencies&quot;: {
    &quot;Flag&quot;: &quot;pen:///flag&quot;
  } 
}
</code></pre>
<h2 id="flagflag-module"><a class="header" href="#flagflag-module"><code>Flag'Flag</code> module</a></h2>
<p>This module provides command-line flag parsing.</p>
<p>The flags have the following formats:</p>
<ul>
<li><code>-foo bar</code>: a named flag of a key <code>foo</code> with a value <code>bar</code></li>
<li><code>foo</code>: a positional flag of a value <code>foo</code></li>
</ul>
<p>Named flags and positional flags are separated by <code>--</code> optionally.</p>
<h3 id="types-11"><a class="header" href="#types-11">Types</a></h3>
<h4 id="set"><a class="header" href="#set"><code>Set</code></a></h4>
<p>A set of flags</p>
<pre><code class="language-pen">type Set {
  Named {string: string}
  Positional [string]
}
</code></pre>
<h3 id="functions-11"><a class="header" href="#functions-11">Functions</a></h3>
<h4 id="parse-1"><a class="header" href="#parse-1"><code>Parse</code></a></h4>
<p>Parse flags.</p>
<pre><code class="language-pen">\(ss [string]) Set | error
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="json-package"><a class="header" href="#json-package"><code>Json</code> package</a></h1>
<p>This package provides a JSON parser.</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;
}
</code></pre>
<h2 id="install-4"><a class="header" href="#install-4">Install</a></h2>
<pre><code class="language-json">{
  &quot;dependencies&quot;: {
    &quot;Json&quot;: &quot;pen:///json&quot;
  } 
}
</code></pre>
<h2 id="jsondecode-module"><a class="header" href="#jsondecode-module"><code>Json'Decode</code> module</a></h2>
<h3 id="types-12"><a class="header" href="#types-12">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-12"><a class="header" href="#functions-12">Functions</a></h3>
<h4 id="decode"><a class="header" href="#decode"><code>Decode</code></a></h4>
<p>Decode a string into a JSON value.</p>
<pre><code class="language-pen">\(s string) Value | error
</code></pre>
<h2 id="jsonencode-module"><a class="header" href="#jsonencode-module"><code>Json'Encode</code> module</a></h2>
<h3 id="types-13"><a class="header" href="#types-13">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-13"><a class="header" href="#functions-13">Functions</a></h3>
<h4 id="encode"><a class="header" href="#encode"><code>Encode</code></a></h4>
<p>Encode a JSON value.</p>
<pre><code class="language-pen">\(v Value) string
</code></pre>
<h2 id="jsonvalue-module"><a class="header" href="#jsonvalue-module"><code>Json'Value</code> module</a></h2>
<h3 id="types-14"><a class="header" href="#types-14">Types</a></h3>
<h4 id="value"><a class="header" href="#value"><code>Value</code></a></h4>
<p>A JSON value</p>
<pre><code class="language-pen">type Value {
  # ...
}
</code></pre>
<h4 id="raw"><a class="header" href="#raw"><code>Raw</code></a></h4>
<p>A raw JSON value represented by built-in types</p>
<pre><code class="language-pen">type Raw = boolean | none | number | string | [Value] | {string: Value}
</code></pre>
<h3 id="functions-14"><a class="header" href="#functions-14">Functions</a></h3>
<h4 id="new-1"><a class="header" href="#new-1"><code>New</code></a></h4>
<p>Create a JSON value.</p>
<pre><code class="language-pen">\(r Raw) Value
</code></pre>
<h4 id="raw-1"><a class="header" href="#raw-1"><code>Raw</code></a></h4>
<p>Get a raw value.</p>
<pre><code class="language-pen">\(v Value) Raw
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="html-package"><a class="header" href="#html-package"><code>Html</code> package</a></h1>
<p>This package provides HTML rendering logic.</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;
}
</code></pre>
<h2 id="install-5"><a class="header" href="#install-5">Install</a></h2>
<pre><code class="language-json">{
  &quot;dependencies&quot;: {
    &quot;Html&quot;: &quot;pen:///html&quot;
  } 
}
</code></pre>
<h2 id="htmlnode-module"><a class="header" href="#htmlnode-module"><code>Html'Node</code> module</a></h2>
<h3 id="types-15"><a class="header" href="#types-15">Types</a></h3>
<h4 id="node"><a class="header" href="#node"><code>Node</code></a></h4>
<p>An HTML node</p>
<pre><code class="language-pen">type Node = Element | string
</code></pre>
<h4 id="element"><a class="header" href="#element"><code>Element</code></a></h4>
<p>An HTML element</p>
<pre><code class="language-pen">type Element {
  Tag string
  Attributes [Attribute]
  Children [Node]
}
</code></pre>
<h4 id="attribute"><a class="header" href="#attribute"><code>Attribute</code></a></h4>
<p>An HTML attribute</p>
<pre><code class="language-pen">type Attribute {
  Key string
  Value string
}
</code></pre>
<h3 id="functions-15"><a class="header" href="#functions-15">Functions</a></h3>
<p>No functions are defined.</p>
<h2 id="htmlrender-module"><a class="header" href="#htmlrender-module"><code>Html'Render</code> module</a></h2>
<h3 id="types-16"><a class="header" href="#types-16">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-16"><a class="header" href="#functions-16">Functions</a></h3>
<h4 id="render"><a class="header" href="#render"><code>Render</code></a></h4>
<p>Render an HTML node.</p>
<pre><code class="language-pen">\(n Node) string | error
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="http-package"><a class="header" href="#http-package"><code>Http</code> package</a></h1>
<p>This package provides HTTP client and server.</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;system&quot;
}
</code></pre>
<h2 id="install-6"><a class="header" href="#install-6">Install</a></h2>
<pre><code class="language-json">{
  &quot;dependencies&quot;: {
    &quot;Http&quot;: &quot;pen:///http&quot;
  } 
}
</code></pre>
<h2 id="httpclient-module"><a class="header" href="#httpclient-module"><code>Http'Client</code> module</a></h2>
<p>This module provides an HTTP client.</p>
<h3 id="types-17"><a class="header" href="#types-17">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-17"><a class="header" href="#functions-17">Functions</a></h3>
<h4 id="send"><a class="header" href="#send"><code>Send</code></a></h4>
<p>Send an HTTP request.</p>
<pre><code class="language-pen">\(ctx Context, r Request) Response | error
</code></pre>
<h2 id="httpcontext-module"><a class="header" href="#httpcontext-module"><code>Http'Context</code> module</a></h2>
<h3 id="types-18"><a class="header" href="#types-18">Types</a></h3>
<h4 id="context"><a class="header" href="#context"><code>Context</code></a></h4>
<p>An HTTP context</p>
<pre><code class="language-pen">type Context = context'Context
</code></pre>
<h3 id="functions-18"><a class="header" href="#functions-18">Functions</a></h3>
<p>No functions are defined.</p>
<h2 id="httprequest-module"><a class="header" href="#httprequest-module"><code>Http'Request</code> module</a></h2>
<h3 id="types-19"><a class="header" href="#types-19">Types</a></h3>
<h4 id="request"><a class="header" href="#request"><code>Request</code></a></h4>
<p>An HTTP request</p>
<pre><code class="language-pen">type Request {
  Method string
  Uri string
  Headers {string: string}
  Body string
}
</code></pre>
<h3 id="functions-19"><a class="header" href="#functions-19">Functions</a></h3>
<p>No functions are defined.</p>
<h2 id="httpresponse-module"><a class="header" href="#httpresponse-module"><code>Http'Response</code> module</a></h2>
<h3 id="types-20"><a class="header" href="#types-20">Types</a></h3>
<h4 id="response"><a class="header" href="#response"><code>Response</code></a></h4>
<p>An HTTP response</p>
<pre><code class="language-pen">type Response {
  Status number
  Headers {string: string}
  Body string
}
</code></pre>
<h3 id="functions-20"><a class="header" href="#functions-20">Functions</a></h3>
<p>No functions are defined.</p>
<h2 id="httpserver-module"><a class="header" href="#httpserver-module"><code>Http'Server</code> module</a></h2>
<p>This module provides an HTTP server.</p>
<h3 id="types-21"><a class="header" href="#types-21">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-21"><a class="header" href="#functions-21">Functions</a></h3>
<h4 id="serve"><a class="header" href="#serve"><code>Serve</code></a></h4>
<p>Run an HTTP service.</p>
<pre><code class="language-pen">\(ctx Context, address string, callback \(Request) Response) none | error
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="os-package"><a class="header" href="#os-package"><code>Os</code> package</a></h1>
<p>This package provides an interface for operating systems.</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;system&quot;
}
</code></pre>
<h2 id="install-7"><a class="header" href="#install-7">Install</a></h2>
<pre><code class="language-json">{
  &quot;dependencies&quot;: {
    &quot;Os&quot;: &quot;pen:///os&quot;
  } 
}
</code></pre>
<h2 id="oscontext-module"><a class="header" href="#oscontext-module"><code>Os'Context</code> module</a></h2>
<h3 id="types-22"><a class="header" href="#types-22">Types</a></h3>
<h4 id="context-1"><a class="header" href="#context-1"><code>Context</code></a></h4>
<p>A context of an operating system.</p>
<pre><code class="language-pen">type Context = context'Context
</code></pre>
<h3 id="functions-22"><a class="header" href="#functions-22">Functions</a></h3>
<p>No functions are defined.</p>
<h2 id="osdirectory-module"><a class="header" href="#osdirectory-module"><code>Os'Directory</code> module</a></h2>
<h3 id="types-23"><a class="header" href="#types-23">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-23"><a class="header" href="#functions-23">Functions</a></h3>
<h4 id="read"><a class="header" href="#read"><code>Read</code></a></h4>
<p>Read a directory and return file paths it contains.</p>
<pre><code class="language-pen">\(ctx Context, path string) [string] | error
</code></pre>
<h4 id="create"><a class="header" href="#create"><code>Create</code></a></h4>
<p>Create a directory.</p>
<pre><code class="language-pen">\(ctx Context, path string) none | error
</code></pre>
<h4 id="remove"><a class="header" href="#remove"><code>Remove</code></a></h4>
<p>Remove a directory.</p>
<pre><code class="language-pen">\(ctx Context, path string) none | error
</code></pre>
<h2 id="osenvironment-module"><a class="header" href="#osenvironment-module"><code>Os'Environment</code> module</a></h2>
<h3 id="types-24"><a class="header" href="#types-24">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-24"><a class="header" href="#functions-24">Functions</a></h3>
<h4 id="arguments"><a class="header" href="#arguments"><code>Arguments</code></a></h4>
<p>Get command line arguments.</p>
<pre><code class="language-pen">\(ctx Context) [string]
</code></pre>
<h4 id="variable"><a class="header" href="#variable"><code>Variable</code></a></h4>
<p>Get an environment variable.</p>
<pre><code class="language-pen">\(ctx Context, name string) string | error
</code></pre>
<h2 id="osfile-module"><a class="header" href="#osfile-module"><code>Os'File</code> module</a></h2>
<h3 id="types-25"><a class="header" href="#types-25">Types</a></h3>
<h4 id="file"><a class="header" href="#file"><code>File</code></a></h4>
<p>A file on a file system.</p>
<pre><code class="language-pen">type File {
  # ...
}
</code></pre>
<h3 id="functions-25"><a class="header" href="#functions-25">Functions</a></h3>
<h4 id="stdin"><a class="header" href="#stdin"><code>StdIn</code></a></h4>
<p>A file of standard input.</p>
<pre><code class="language-pen">\() File
</code></pre>
<h4 id="stdout"><a class="header" href="#stdout"><code>StdOut</code></a></h4>
<p>A file of standard output.</p>
<pre><code class="language-pen">\() File
</code></pre>
<h4 id="stderr"><a class="header" href="#stderr"><code>StdErr</code></a></h4>
<p>A file of standard error.</p>
<pre><code class="language-pen">\() File
</code></pre>
<h4 id="open"><a class="header" href="#open"><code>Open</code></a></h4>
<p>Open a file for read-only.</p>
<pre><code class="language-pen">\(ctx Context, path string) File | error
</code></pre>
<h4 id="openwithoptions"><a class="header" href="#openwithoptions"><code>OpenWithOptions</code></a></h4>
<p>Open a file with options.</p>
<pre><code class="language-pen">\(ctx Context, path string, opt OpenOptions) File | error
</code></pre>
<h4 id="read-1"><a class="header" href="#read-1"><code>Read</code></a></h4>
<p>Read a file.</p>
<pre><code class="language-pen">\(ctx Context, file File) string | error
</code></pre>
<h4 id="readlimit"><a class="header" href="#readlimit"><code>ReadLimit</code></a></h4>
<p>Read a file until a size limit.</p>
<pre><code class="language-pen">\(ctx Context, file File, limit number) string | error
</code></pre>
<h4 id="write"><a class="header" href="#write"><code>Write</code></a></h4>
<p>Write data to a file.</p>
<pre><code class="language-pen">\(ctx Context, file File, data string) number | error
</code></pre>
<h4 id="copy"><a class="header" href="#copy"><code>Copy</code></a></h4>
<p>Copy a file to another path.</p>
<pre><code class="language-pen">\(ctx Context, src string, dest string) none | error
</code></pre>
<h4 id="move"><a class="header" href="#move"><code>Move</code></a></h4>
<p>Move a file to another path.</p>
<pre><code class="language-pen">\(ctx Context, src string, dest string) none | error
</code></pre>
<h4 id="remove-1"><a class="header" href="#remove-1"><code>Remove</code></a></h4>
<p>Remove a file.</p>
<pre><code class="language-pen">\(ctx Context, path string) none | error
</code></pre>
<h4 id="metadata"><a class="header" href="#metadata"><code>Metadata</code></a></h4>
<p>Get metadata of a file at a path.</p>
<pre><code class="language-pen">\(ctx Context, path string) Metadata | error
</code></pre>
<h2 id="osfilemetadata-module"><a class="header" href="#osfilemetadata-module"><code>Os'File'Metadata</code> module</a></h2>
<h3 id="types-26"><a class="header" href="#types-26">Types</a></h3>
<h4 id="metadata-1"><a class="header" href="#metadata-1"><code>Metadata</code></a></h4>
<p>File metadata</p>
<pre><code class="language-pen">type Metadata {
  Size number
}
</code></pre>
<h3 id="functions-26"><a class="header" href="#functions-26">Functions</a></h3>
<p>No functions are defined.</p>
<h2 id="osfileopenoptions-module"><a class="header" href="#osfileopenoptions-module"><code>Os'File'OpenOptions</code> module</a></h2>
<h3 id="types-27"><a class="header" href="#types-27">Types</a></h3>
<h4 id="openoptions"><a class="header" href="#openoptions"><code>OpenOptions</code></a></h4>
<p>Options to open a file</p>
<ul>
<li><code>Append</code> allows appending data to the file.</li>
<li><code>Create</code> creates a new file if the file doesn't exist or opens it otherwise.</li>
<li><code>CreateNew</code> creates a new file. If the file already exists, it emits an error.</li>
<li><code>Read</code> allows reading data from the file.</li>
<li><code>Truncate</code> truncates the file to zero byte.</li>
<li><code>Write</code> allows writing data to the file.</li>
</ul>
<pre><code class="language-pen">type OpenOptions {
  Append boolean
  Create boolean
  CreateNew boolean
  Read boolean
  Truncate boolean
  Write boolean
}
</code></pre>
<h3 id="functions-27"><a class="header" href="#functions-27">Functions</a></h3>
<h4 id="default"><a class="header" href="#default"><code>Default</code></a></h4>
<p>Get default options to open a file. They do not include any permission.</p>
<pre><code class="language-pen">\() OpenOptions
</code></pre>
<h2 id="osprocess-module"><a class="header" href="#osprocess-module"><code>Os'Process</code> module</a></h2>
<h3 id="types-28"><a class="header" href="#types-28">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-28"><a class="header" href="#functions-28">Functions</a></h3>
<h4 id="exit"><a class="header" href="#exit"><code>Exit</code></a></h4>
<p>Exit a current process.</p>
<pre><code class="language-pen">\(ctx Context, code number) none
</code></pre>
<h4 id="run"><a class="header" href="#run"><code>Run</code></a></h4>
<p>Run a command.</p>
<pre><code class="language-pen">\(ctx Context, cmd string, args [string]) none | error
</code></pre>
<h2 id="ostcp-module"><a class="header" href="#ostcp-module"><code>Os'Tcp</code> module</a></h2>
<h3 id="types-29"><a class="header" href="#types-29">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-29"><a class="header" href="#functions-29">Functions</a></h3>
<h4 id="bind"><a class="header" href="#bind"><code>Bind</code></a></h4>
<p>Create a listener bound to a server address.</p>
<pre><code class="language-pen">\(ctx Context, address string) Listener | error
</code></pre>
<h4 id="connect"><a class="header" href="#connect"><code>Connect</code></a></h4>
<p>Create a stream connected to a peer address.</p>
<pre><code class="language-pen">\(ctx Context, address string) Stream | error
</code></pre>
<h4 id="accept"><a class="header" href="#accept"><code>Accept</code></a></h4>
<p>Accept a client connection and create its stream.</p>
<pre><code class="language-pen">\(ctx Context, l Listener) AcceptedStream | error
</code></pre>
<h4 id="receive"><a class="header" href="#receive"><code>Receive</code></a></h4>
<p>Receive data from a peer through a stream with a size limit in bytes.</p>
<pre><code class="language-pen">\(ctx Context, s Stream, limit number) string | error
</code></pre>
<h4 id="send-1"><a class="header" href="#send-1"><code>Send</code></a></h4>
<p>Send data to a peer through a stream.</p>
<pre><code class="language-pen">\(ctx Context, s Stream, data string) number | error
</code></pre>
<h2 id="ostcpacceptedstream-module"><a class="header" href="#ostcpacceptedstream-module"><code>Os'Tcp'AcceptedStream</code> module</a></h2>
<h3 id="types-30"><a class="header" href="#types-30">Types</a></h3>
<h4 id="acceptedstream"><a class="header" href="#acceptedstream"><code>AcceptedStream</code></a></h4>
<p>A TCP stream accepted on a server with a client address</p>
<pre><code class="language-pen">type AcceptedStream {
  Stream Stream
  Address string
}
</code></pre>
<h3 id="functions-30"><a class="header" href="#functions-30">Functions</a></h3>
<p>No functions are defined.</p>
<h2 id="ostcplistener-module"><a class="header" href="#ostcplistener-module"><code>Os'Tcp'Listener</code> module</a></h2>
<h3 id="types-31"><a class="header" href="#types-31">Types</a></h3>
<h4 id="listener"><a class="header" href="#listener"><code>Listener</code></a></h4>
<p>A TCP listener to listen for client connections</p>
<pre><code class="language-pen">type Listener {
  # ...
}
</code></pre>
<h3 id="functions-31"><a class="header" href="#functions-31">Functions</a></h3>
<p>No functions are defined.</p>
<h2 id="ostcpstream-module"><a class="header" href="#ostcpstream-module"><code>Os'Tcp'Stream</code> module</a></h2>
<h3 id="types-32"><a class="header" href="#types-32">Types</a></h3>
<h4 id="stream"><a class="header" href="#stream"><code>Stream</code></a></h4>
<p>A TCP stream</p>
<pre><code class="language-pen">type Stream {
  # ...
}
</code></pre>
<h3 id="functions-32"><a class="header" href="#functions-32">Functions</a></h3>
<p>No functions are defined.</p>
<h2 id="ostime-module"><a class="header" href="#ostime-module"><code>Os'Time</code> module</a></h2>
<h3 id="types-33"><a class="header" href="#types-33">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-33"><a class="header" href="#functions-33">Functions</a></h3>
<h4 id="now"><a class="header" href="#now"><code>Now</code></a></h4>
<p>Fetch a current system time in milliseconds.</p>
<pre><code class="language-pen">\(ctx Context) number
</code></pre>
<h4 id="sleep"><a class="header" href="#sleep"><code>Sleep</code></a></h4>
<p>Pause a current execution context for a given amount of time.</p>
<pre><code class="language-pen">\(ctx Context, milliseconds number) none
</code></pre>
<h2 id="osudp-module"><a class="header" href="#osudp-module"><code>Os'Udp</code> module</a></h2>
<h3 id="types-34"><a class="header" href="#types-34">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-34"><a class="header" href="#functions-34">Functions</a></h3>
<h4 id="bind-1"><a class="header" href="#bind-1"><code>Bind</code></a></h4>
<p>Bind a socket with a server address.</p>
<pre><code class="language-pen">\(ctx Context, address string) Socket | error
</code></pre>
<h4 id="connect-1"><a class="header" href="#connect-1"><code>Connect</code></a></h4>
<p>Connect a socket to a peer address.</p>
<pre><code class="language-pen">\(ctx Context, s Socket, address string) none | error
</code></pre>
<h4 id="receive-1"><a class="header" href="#receive-1"><code>Receive</code></a></h4>
<p>Receive a datagram from a connected address.</p>
<pre><code class="language-pen">\(ctx Context, s Socket) string | error
</code></pre>
<h4 id="receivefrom"><a class="header" href="#receivefrom"><code>ReceiveFrom</code></a></h4>
<p>Receive a datagram from any address.</p>
<pre><code class="language-pen">\(ctx Context, s Socket) Datagram | error
</code></pre>
<h4 id="send-2"><a class="header" href="#send-2"><code>Send</code></a></h4>
<p>Send a datagram to a connected address.</p>
<pre><code class="language-pen">\(ctx Context, s Socket, data string) number | error
</code></pre>
<h4 id="sendto"><a class="header" href="#sendto"><code>SendTo</code></a></h4>
<p>Send a datagram to a specified address.</p>
<pre><code class="language-pen">\(ctx Context, s Socket, data string, address string) number | error
</code></pre>
<h2 id="osudpdatagram-module"><a class="header" href="#osudpdatagram-module"><code>Os'Udp'Datagram</code> module</a></h2>
<h3 id="types-35"><a class="header" href="#types-35">Types</a></h3>
<h4 id="datagram"><a class="header" href="#datagram"><code>Datagram</code></a></h4>
<p>UDP datagram</p>
<pre><code class="language-pen">type Datagram {
  Data string
  Address string
}
</code></pre>
<h3 id="functions-35"><a class="header" href="#functions-35">Functions</a></h3>
<p>No functions are defined.</p>
<h2 id="osudpsocket-module"><a class="header" href="#osudpsocket-module"><code>Os'Udp'Socket</code> module</a></h2>
<h3 id="types-36"><a class="header" href="#types-36">Types</a></h3>
<h4 id="socket"><a class="header" href="#socket"><code>Socket</code></a></h4>
<p>UDP socket</p>
<pre><code class="language-pen">type Socket {
  # ...
}
</code></pre>
<h3 id="functions-36"><a class="header" href="#functions-36">Functions</a></h3>
<p>No functions are defined.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="random-package"><a class="header" href="#random-package"><code>Random</code> package</a></h1>
<p>This package provides random number generation.</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;system&quot;
}
</code></pre>
<h2 id="install-8"><a class="header" href="#install-8">Install</a></h2>
<pre><code class="language-json">{
  &quot;dependencies&quot;: {
    &quot;Random&quot;: &quot;pen:///random&quot;
  } 
}
</code></pre>
<h2 id="randomcontext-module"><a class="header" href="#randomcontext-module"><code>Random'Context</code> module</a></h2>
<h3 id="types-37"><a class="header" href="#types-37">Types</a></h3>
<h4 id="context-2"><a class="header" href="#context-2"><code>Context</code></a></h4>
<p>A context of random number generation.</p>
<pre><code class="language-pen">type Context = context'Context
</code></pre>
<h3 id="functions-37"><a class="header" href="#functions-37">Functions</a></h3>
<p>No functions are defined.</p>
<h2 id="randomrandom-module"><a class="header" href="#randomrandom-module"><code>Random'Random</code> module</a></h2>
<h3 id="types-38"><a class="header" href="#types-38">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-38"><a class="header" href="#functions-38">Functions</a></h3>
<h4 id="number-1"><a class="header" href="#number-1"><code>Number</code></a></h4>
<p>Generate a random number in a range of [0, 1).</p>
<pre><code class="language-pen">\(ctx Context) number
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="regex-package"><a class="header" href="#regex-package"><code>Regex</code> package</a></h1>
<p>This package provides regular expressions.</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;
}
</code></pre>
<h2 id="install-9"><a class="header" href="#install-9">Install</a></h2>
<pre><code class="language-json">{
  &quot;dependencies&quot;: {
    &quot;Regex&quot;: &quot;pen:///regex&quot;
  } 
}
</code></pre>
<h2 id="regexexpression-module"><a class="header" href="#regexexpression-module"><code>Regex'Expression</code> module</a></h2>
<p>This module provides functions to compile and match regular expressions.</p>
<h3 id="types-39"><a class="header" href="#types-39">Types</a></h3>
<h4 id="expression"><a class="header" href="#expression"><code>Expression</code></a></h4>
<p>A regular expression.</p>
<pre><code class="language-pen">type Expression {
  # ...
}
</code></pre>
<h3 id="functions-39"><a class="header" href="#functions-39">Functions</a></h3>
<h4 id="new-2"><a class="header" href="#new-2"><code>New</code></a></h4>
<p>Compile a regular expression.</p>
<pre><code class="language-pen">\(s string) Expression | error
</code></pre>
<h4 id="ismatch"><a class="header" href="#ismatch"><code>IsMatch</code></a></h4>
<p>Check if a regular expression matches with a string or not.</p>
<pre><code class="language-pen">\(e Expression, s string) boolean
</code></pre>
<h4 id="match"><a class="header" href="#match"><code>Match</code></a></h4>
<p>Match a regular expression with a string and return matched groups.</p>
<pre><code class="language-pen">\(e Expression, s string) [string | none] | none
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sql-package"><a class="header" href="#sql-package"><code>Sql</code> package</a></h1>
<p>This package provides a SQL database client.</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;system&quot;
}
</code></pre>
<h2 id="install-10"><a class="header" href="#install-10">Install</a></h2>
<pre><code class="language-json">{
  &quot;dependencies&quot;: {
    &quot;Sql&quot;: &quot;pen:///sql&quot;
  } 
}
</code></pre>
<h2 id="sqlcontext-module"><a class="header" href="#sqlcontext-module"><code>Sql'Context</code> module</a></h2>
<h3 id="types-40"><a class="header" href="#types-40">Types</a></h3>
<h4 id="context-3"><a class="header" href="#context-3"><code>Context</code></a></h4>
<p>A SQL database context</p>
<pre><code class="language-pen">type Context = context'Context
</code></pre>
<h3 id="functions-40"><a class="header" href="#functions-40">Functions</a></h3>
<p>No functions are defined.</p>
<h2 id="sqlpool-module"><a class="header" href="#sqlpool-module"><code>Sql'Pool</code> module</a></h2>
<h3 id="types-41"><a class="header" href="#types-41">Types</a></h3>
<h4 id="pool"><a class="header" href="#pool"><code>Pool</code></a></h4>
<p>A connection pool</p>
<pre><code class="language-pen">type Pool = pool'Pool
</code></pre>
<h3 id="functions-41"><a class="header" href="#functions-41">Functions</a></h3>
<h4 id="new-3"><a class="header" href="#new-3"><code>New</code></a></h4>
<p>Create a connection pool.</p>
<pre><code class="language-pen">\(context Context, uri string, options Options) Pool | error
</code></pre>
<h4 id="query"><a class="header" href="#query"><code>Query</code></a></h4>
<p>Run a query and return its rows.</p>
<pre><code class="language-pen">\(context Context, pool Pool, query string, arguments [Value]) [[Value]] | error
</code></pre>
<h4 id="execute"><a class="header" href="#execute"><code>Execute</code></a></h4>
<p>Run a query and return a number of affected rows.</p>
<pre><code class="language-pen">\(context Context, pool Pool, query string, arguments [Value]) number | error
</code></pre>
<h2 id="sqlpooloptions-module"><a class="header" href="#sqlpooloptions-module"><code>Sql'Pool'Options</code> module</a></h2>
<h3 id="types-42"><a class="header" href="#types-42">Types</a></h3>
<h4 id="options"><a class="header" href="#options"><code>Options</code></a></h4>
<p>Connection pool options</p>
<pre><code class="language-pen">type Options {
  MinConnections number
  MaxConnections number
  ConnectTimeout number
}
</code></pre>
<h3 id="functions-42"><a class="header" href="#functions-42">Functions</a></h3>
<p>No functions are defined.</p>
<h2 id="sqlvalue-module"><a class="header" href="#sqlvalue-module"><code>Sql'Value</code> module</a></h2>
<h3 id="types-43"><a class="header" href="#types-43">Types</a></h3>
<h4 id="value-1"><a class="header" href="#value-1"><code>Value</code></a></h4>
<p>A value in a column</p>
<pre><code class="language-pen">type Value = boolean | none | number | string
</code></pre>
<h3 id="functions-43"><a class="header" href="#functions-43">Functions</a></h3>
<p>No functions are defined.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="test-package"><a class="header" href="#test-package"><code>Test</code> package</a></h1>
<p>This package provides test utilities.</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;
}
</code></pre>
<h2 id="install-11"><a class="header" href="#install-11">Install</a></h2>
<pre><code class="language-json">{
  &quot;dependencies&quot;: {
    &quot;Test&quot;: &quot;pen:///test&quot;
  } 
}
</code></pre>
<h2 id="testassert-module"><a class="header" href="#testassert-module"><code>Test'Assert</code> module</a></h2>
<p>This module provides a collection of assertion logic for testing.</p>
<h3 id="types-44"><a class="header" href="#types-44">Types</a></h3>
<p>No types are defined.</p>
<h3 id="functions-44"><a class="header" href="#functions-44">Functions</a></h3>
<h4 id="true"><a class="header" href="#true"><code>True</code></a></h4>
<p>Assert that a condition is true.</p>
<pre><code class="language-pen">\(x boolean) none | error
</code></pre>
<h4 id="error-2"><a class="header" href="#error-2"><code>Error</code></a></h4>
<p>Check if a value is an error.</p>
<pre><code class="language-pen">\(x any) none | error
</code></pre>
<h4 id="fail"><a class="header" href="#fail"><code>Fail</code></a></h4>
<p>Fail with an error immediately.
This function is useful to make unreachable codes fail.</p>
<pre><code class="language-pen">\() error
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="examples-1"><a class="header" href="#examples-1">Examples</a></h1>
<p>These are examples on how to write programs in Pen, and use its command line tools and standard packages.</p>
<p>See also <a href="https://github.com/pen-lang/pen/tree/main/examples">our code repository</a> for examples of full applications and libraries.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="types-45"><a class="header" href="#types-45">Types</a></h1>
<p>These are examples on how to use types and their values in Pen.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="number-2"><a class="header" href="#number-2">Number</a></h1>
<h2 id="background"><a class="header" href="#background">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<h2 id="use-a-number-literal"><a class="header" href="#use-a-number-literal">Use a number literal</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() number {
  42
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="use-arithmetic-operators"><a class="header" href="#use-arithmetic-operators">Use arithmetic operators</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() number {
  1 + 2 - 3 * 4 / 5
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="use-equality-operators"><a class="header" href="#use-equality-operators">Use equality operators</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() boolean {
  0 == 0
}

g = \() boolean {
  0 != 0
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="use-order-operators"><a class="header" href="#use-order-operators">Use order operators</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() boolean {
  0 &lt; 0
}

g = \() boolean {
  0 &lt;= 0
}

h = \() boolean {
  0 &gt; 0
}

i = \() boolean {
  0 &gt;= 0
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="boolean-2"><a class="header" href="#boolean-2">Boolean</a></h1>
<h2 id="background-1"><a class="header" href="#background-1">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<h2 id="use-boolean-literals"><a class="header" href="#use-boolean-literals">Use boolean literals</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() boolean {
  true
}

g = \() boolean {
  false
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="use-an-and-operation"><a class="header" href="#use-an-and-operation">Use an and operation</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() boolean {
  true &amp; false
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="use-an-or-operation"><a class="header" href="#use-an-or-operation">Use an or operation</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() boolean {
  true | false
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="use-a-not-operation"><a class="header" href="#use-a-not-operation">Use a not operation</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() boolean {
  !true
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="use-an-if-expression"><a class="header" href="#use-an-if-expression">Use an if expression</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() number {
  if true {
    1
  } else {
    0
  }
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="none-1"><a class="header" href="#none-1">None</a></h1>
<h2 id="background-2"><a class="header" href="#background-2">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<h2 id="use-a-none-literal"><a class="header" href="#use-a-none-literal">Use a none literal</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() none {
  none
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="string-2"><a class="header" href="#string-2">String</a></h1>
<h2 id="background-3"><a class="header" href="#background-3">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<h2 id="use-a-string-literal"><a class="header" href="#use-a-string-literal">Use a string literal</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() string {
  &quot;foo&quot;
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="use-equality-operators-1"><a class="header" href="#use-equality-operators-1">Use equality operators</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() boolean {
  &quot;&quot; == &quot;&quot;
}

g = \() boolean {
  &quot;&quot; != &quot;&quot;
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="function-1"><a class="header" href="#function-1">Function</a></h1>
<h2 id="background-4"><a class="header" href="#background-4">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<h2 id="define-a-function"><a class="header" href="#define-a-function">Define a function</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(x number) number {
  x
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="call-a-function-with-no-argument"><a class="header" href="#call-a-function-with-no-argument">Call a function with no argument</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() number {
  f()
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="call-a-function-with-an-argument"><a class="header" href="#call-a-function-with-an-argument">Call a function with an argument</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(x number) number {
  f(x)
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="call-a-function-with-two-arguments"><a class="header" href="#call-a-function-with-two-arguments">Call a function with two arguments</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(x number, y number) number {
  f(x, y)
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="define-a-closure"><a class="header" href="#define-a-closure">Define a closure</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(x number) \(number) number {
  \(y number) number {
    x + y
  }
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="record"><a class="header" href="#record">Record</a></h1>
<h2 id="background-5"><a class="header" href="#background-5">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<h2 id="create-a-record-with-a-field"><a class="header" href="#create-a-record-with-a-field">Create a record with a field</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">type r {
  x number
}

f = \() r {
  r{x: 42}
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="create-a-record-with-two-fields"><a class="header" href="#create-a-record-with-two-fields">Create a record with two fields</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">type r {
  x number
  y none
}

f = \() r {
  r{x: 42, y: none}
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="create-a-record-with-no-field"><a class="header" href="#create-a-record-with-no-field">Create a record with no field</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">type r {}

f = \() r {
  r{}
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="update-a-record"><a class="header" href="#update-a-record">Update a record</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">type r {
  x number
  y none
}

f = \(x r) r {
  r{...x, y: none}
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="get-a-field-in-a-record"><a class="header" href="#get-a-field-in-a-record">Get a field in a record</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">type r {
  x number
}

f = \(x r) number {
  x.x
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="use-an-equal-operator"><a class="header" href="#use-an-equal-operator">Use an equal operator</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">type r {
  x number
}

f = \(x r, y r) boolean {
  x == y
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="use-a-not-equal-operator"><a class="header" href="#use-a-not-equal-operator">Use a not-equal operator</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">type r {
  x number
}

f = \(x r, y r) boolean {
  x == y
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="propagate-openness-of-a-record"><a class="header" href="#propagate-openness-of-a-record">Propagate openness of a record</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">type Foo {
  X number
}
</code></pre>
<p><em>And</em> a file named &quot;Bar.pen&quot; with:</p>
<pre><code class="language-pen">import 'Foo

Bar = \() Foo'Foo {
  Foo'Foo{X: 42}
}
</code></pre>
<p><em>And</em> a file named &quot;Baz.pen&quot; with:</p>
<pre><code class="language-pen">import 'Bar

f = \() number {
  Bar'Bar().X
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="union"><a class="header" href="#union">Union</a></h1>
<h2 id="background-6"><a class="header" href="#background-6">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<h2 id="upcast-a-number-into-a-union"><a class="header" href="#upcast-a-number-into-a-union">Upcast a number into a union</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() number | none {
  42
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="upcast-a-function-into-a-union"><a class="header" href="#upcast-a-function-into-a-union">Upcast a function into a union</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() (\() number) | none {
  \() number {
    42
  }
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="upcast-a-list-into-a-union"><a class="header" href="#upcast-a-list-into-a-union">Upcast a list into a union</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() [number] | none {
  [number 42]
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="downcast-a-union-type"><a class="header" href="#downcast-a-union-type">Downcast a union type</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(x number | none) number {
  if x = x as number {
    x
  } else if none {
    0
  }
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="downcast-a-union-type-with-an-else-block"><a class="header" href="#downcast-a-union-type-with-an-else-block">Downcast a union type with an else block</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(x number | none) number {
  if x = x as none {
    0
  } else {
    x
  }
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="downcast-a-union-type-to-another-union-type"><a class="header" href="#downcast-a-union-type-to-another-union-type">Downcast a union type to another union type</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(x number | boolean | none) number | none {
  if x = x as number | none {
    x
  } else {
    none
  }
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="list"><a class="header" href="#list">List</a></h1>
<h2 id="background-7"><a class="header" href="#background-7">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<h2 id="create-an-empty-list"><a class="header" href="#create-an-empty-list">Create an empty list</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() [number] {
  [number]
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="create-a-list-with-an-element"><a class="header" href="#create-a-list-with-an-element">Create a list with an element</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() [number] {
  [number 1]
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="create-a-list-with-two-elements"><a class="header" href="#create-a-list-with-two-elements">Create a list with two elements</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() [number] {
  [number 1, 2]
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="join-lists"><a class="header" href="#join-lists">Join lists</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(xs [number]) [number] {
  [number ...xs, ...xs]
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="create-a-list-of-a-union-type"><a class="header" href="#create-a-list-of-a-union-type">Create a list of a union type</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() [number | none] {
  [number | none 1, none]
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="coerce-elements-of-a-spread-list"><a class="header" href="#coerce-elements-of-a-spread-list">Coerce elements of a spread list</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(xs [number]) [number | none] {
  [number | none ...xs]
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="use-if-list-expression"><a class="header" href="#use-if-list-expression">Use if-list expression</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(xs [number]) [number] {
  if [y, ...ys] = xs {
    [number y(), ...ys]
  } else {
    [number]
  }
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="use-list-comprehension"><a class="header" href="#use-list-comprehension">Use list comprehension</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(xs [number]) [number] {
  [number x() + 42 for x in xs]
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="get-a-size-of-a-list"><a class="header" href="#get-a-size-of-a-list">Get a size of a list</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(xs [none]) number {
  size(xs)
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="error-3"><a class="header" href="#error-3">Error</a></h1>
<h2 id="background-8"><a class="header" href="#background-8">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<h2 id="call-an-error-function"><a class="header" href="#call-an-error-function">Call an error function</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() error {
  error(none)
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="call-a-source-function"><a class="header" href="#call-a-source-function">Call a source function</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(e error) any {
  source(e)
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="use-a-try-operator"><a class="header" href="#use-a-try-operator">Use a try operator</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(x number | error) number | error {
  x? + 1
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="use-a-try-operator-with-a-union-type"><a class="header" href="#use-a-try-operator-with-a-union-type">Use a try operator with a union type</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(x number | none | error) number | error {
  if x = x? as number {
    x + 1
  } else if none {
    0
  }
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="any-2"><a class="header" href="#any-2">Any</a></h1>
<h2 id="background-9"><a class="header" href="#background-9">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<h2 id="use-an-any-type"><a class="header" href="#use-an-any-type">Use an any type</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() any {
  42
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="downcast-an-any-type"><a class="header" href="#downcast-an-any-type">Downcast an any type</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(x any) number {
  if x = x as number {
    x
  } else {
    0
  }
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="polymorphism"><a class="header" href="#polymorphism">Polymorphism</a></h1>
<h2 id="background-10"><a class="header" href="#background-10">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<h2 id="use-an-equal-operator-1"><a class="header" href="#use-an-equal-operator-1">Use an equal operator</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(x number | none) boolean {
  x == none
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="use-a-not-equal-operator-1"><a class="header" href="#use-a-not-equal-operator-1">Use a not-equal operator</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(x number | none) boolean {
  x != none
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="compare-unions"><a class="header" href="#compare-unions">Compare unions</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(x number | none, y number | none) boolean {
  x == y
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="compare-a-union-and-none"><a class="header" href="#compare-a-union-and-none">Compare a union and none</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(x number | none) boolean {
  x == none
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="syntax-1"><a class="header" href="#syntax-1">Syntax</a></h1>
<p>These are examples on how to write programs in Pen.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="block-1"><a class="header" href="#block-1">Block</a></h1>
<h2 id="background-11"><a class="header" href="#background-11">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<h2 id="define-a-variable"><a class="header" href="#define-a-variable">Define a variable</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(x number) number {
  y = x

  y
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="call-a-function"><a class="header" href="#call-a-function">Call a function</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() none {
  none
}

g = \() none {
  f()

  none
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="use-if-expression"><a class="header" href="#use-if-expression">Use if expression</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \() none {
  none
}

g = \() none {
  none
}

h = \(x boolean) none {
  if x {
    f()
  } else {
    g()
  }

  none
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="modules-1"><a class="header" href="#modules-1">Modules</a></h1>
<h2 id="background-12"><a class="header" href="#background-12">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<h2 id="import-a-function-from-a-module"><a class="header" href="#import-a-function-from-a-module">Import a function from a module</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">Foo = \() number {
  42
}
</code></pre>
<p><em>And</em> a file named &quot;Bar.pen&quot; with:</p>
<pre><code class="language-pen">import 'Foo

Bar = \() number {
  Foo'Foo()
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="import-a-type-alias-from-a-module"><a class="header" href="#import-a-type-alias-from-a-module">Import a type alias from a module</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">type Foo = number
</code></pre>
<p><em>And</em> a file named &quot;Bar.pen&quot; with:</p>
<pre><code class="language-pen">import 'Foo

type Bar = Foo'Foo
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="import-a-function-from-a-nested-module"><a class="header" href="#import-a-function-from-a-nested-module">Import a function from a nested module</a></h2>
<p><em>Given</em> a file named &quot;Foo/Foo.pen&quot; with:</p>
<pre><code class="language-pen">Foo = \() number {
  42
}
</code></pre>
<p><em>And</em> a file named &quot;Bar.pen&quot; with:</p>
<pre><code class="language-pen">import 'Foo'Foo

Bar = \() number {
  Foo'Foo()
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="import-a-module-with-a-custom-prefix"><a class="header" href="#import-a-module-with-a-custom-prefix">Import a module with a custom prefix</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">Foo = \() number {
  42
}
</code></pre>
<p><em>And</em> a file named &quot;Bar.pen&quot; with:</p>
<pre><code class="language-pen">import 'Foo as Bar

Bar = \() number {
  Bar'Foo()
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="import-a-type-definition-with-no-prefix"><a class="header" href="#import-a-type-definition-with-no-prefix">Import a type definition with no prefix</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">type Foo {}
</code></pre>
<p><em>And</em> a file named &quot;Bar.pen&quot; with:</p>
<pre><code class="language-pen">import 'Foo { Foo }

type Bar = Foo
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="import-a-type-alias-with-no-prefix"><a class="header" href="#import-a-type-alias-with-no-prefix">Import a type alias with no prefix</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">type Foo = number
</code></pre>
<p><em>And</em> a file named &quot;Bar.pen&quot; with:</p>
<pre><code class="language-pen">import 'Foo { Foo }

type Bar = Foo
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="import-a-function-with-no-prefix"><a class="header" href="#import-a-function-with-no-prefix">Import a function with no prefix</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">Foo = \() number {
  42
}
</code></pre>
<p><em>And</em> a file named &quot;Bar.pen&quot; with:</p>
<pre><code class="language-pen">import 'Foo { Foo }

Bar = \() number {
  Foo()
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="packages-1"><a class="header" href="#packages-1">Packages</a></h1>
<h2 id="background-13"><a class="header" href="#background-13">Background</a></h2>
<p><em>Given</em> a file named &quot;foo/pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<p><em>And</em> a file named &quot;foo/Foo.pen&quot; with:</p>
<pre><code class="language-pen">type Foo = number

Foo = \() number {
  42
}
</code></pre>
<p><em>And</em> a file named &quot;foo/Foo/Foo.pen&quot; with:</p>
<pre><code class="language-pen">Foo = \() number {
  42
}
</code></pre>
<p><em>And</em> a directory named &quot;bar&quot;</p>
<p><em>And</em> I cd to &quot;bar&quot;</p>
<p><em>And</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {
    &quot;Foo&quot;: &quot;../foo&quot;
  }
}
</code></pre>
<h2 id="import-a-function-from-a-module-1"><a class="header" href="#import-a-function-from-a-module-1">Import a function from a module</a></h2>
<p><em>Given</em> a file named &quot;Bar.pen&quot; with:</p>
<pre><code class="language-pen">import Foo'Foo

Bar = \() number {
  Foo'Foo()
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="import-a-type-from-a-module"><a class="header" href="#import-a-type-from-a-module">Import a type from a module</a></h2>
<p><em>Given</em> a file named &quot;Bar.pen&quot; with:</p>
<pre><code class="language-pen">import Foo'Foo

type Bar = Foo'Foo
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="import-a-function-from-a-nested-module-1"><a class="header" href="#import-a-function-from-a-nested-module-1">Import a function from a nested module</a></h2>
<p><em>Given</em> a file named &quot;Bar.pen&quot; with:</p>
<pre><code class="language-pen">import Foo'Foo'Foo

Bar = \() number {
  Foo'Foo()
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="commands"><a class="header" href="#commands">Commands</a></h1>
<p>These are examples on how to use command line tools of Pen.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="building-packages"><a class="header" href="#building-packages">Building packages</a></h1>
<h2 id="build-an-application-package"><a class="header" href="#build-an-application-package">Build an application package</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;application&quot;,
  &quot;dependencies&quot;: {
    &quot;Os&quot;: &quot;pen:///os&quot;
  }
}
</code></pre>
<p><em>And</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Os'Context { Context }

main = \(ctx context) none {
  none
}
</code></pre>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code>.</p>
<h2 id="build-a-library-package"><a class="header" href="#build-a-library-package">Build a library package</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<p><em>And</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(x number) number {
  x
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="cross-build-an-application-package"><a class="header" href="#cross-build-an-application-package">Cross-build an application package</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;application&quot;,
  &quot;dependencies&quot;: {
    &quot;Os&quot;: &quot;pen:///os-sync&quot;
  }
}
</code></pre>
<p><em>And</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Os'Context { Context }

main = \(ctx context) none {
  none
}
</code></pre>
<p><em>And</em> I successfully run <code>rustup target add &lt;target&gt;</code></p>
<p><em>When</em> I run <code>pen build --target &lt;target&gt;</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h3 id="examples-2"><a class="header" href="#examples-2">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th>target</th></tr></thead><tbody>
<tr><td>i686-unknown-linux-musl</td></tr>
<tr><td>x86_64-unknown-linux-musl</td></tr>
<tr><td>aarch64-unknown-linux-musl</td></tr>
<tr><td>wasm32-wasi</td></tr>
</tbody></table>
</div>
<h2 id="cross-build-a-library-package"><a class="header" href="#cross-build-a-library-package">Cross-build a library package</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<p><em>And</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">f = \(x number) number {
  x
}
</code></pre>
<p><em>And</em> I successfully run <code>rustup target add &lt;target&gt;</code></p>
<p><em>When</em> I run <code>pen build --target &lt;target&gt;</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h3 id="examples-3"><a class="header" href="#examples-3">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th>target</th></tr></thead><tbody>
<tr><td>i686-unknown-linux-musl</td></tr>
<tr><td>x86_64-unknown-linux-musl</td></tr>
<tr><td>aarch64-unknown-linux-musl</td></tr>
<tr><td>wasm32-wasi</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="creating-packages"><a class="header" href="#creating-packages">Creating packages</a></h1>
<h2 id="create-an-application-package"><a class="header" href="#create-an-application-package">Create an application package</a></h2>
<p><em>Given</em> I successfully run <code>pen create foo</code></p>
<p><em>And</em> I cd to &quot;foo&quot;</p>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code>.</p>
<h2 id="create-a-library-package"><a class="header" href="#create-a-library-package">Create a library package</a></h2>
<p><em>Given</em> I successfully run <code>pen create --library foo</code></p>
<p><em>And</em> I cd to &quot;foo&quot;</p>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="create-an-application-package-in-a-current-directory"><a class="header" href="#create-an-application-package-in-a-current-directory">Create an application package in a current directory</a></h2>
<p><em>Given</em> I successfully run <code>pen create .</code></p>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code>.</p>
<h2 id="create-a-library-package-in-a-current-directory"><a class="header" href="#create-a-library-package-in-a-current-directory">Create a library package in a current directory</a></h2>
<p><em>Given</em> I successfully run <code>pen create --library .</code></p>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="testing-packages"><a class="header" href="#testing-packages">Testing packages</a></h1>
<h2 id="background-14"><a class="header" href="#background-14">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {
    &quot;Test&quot;: &quot;pen:///test&quot;
  }
}
</code></pre>
<p><em>And</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">Add = \(x number, y number) number {
  x + y
}
</code></pre>
<h2 id="test-a-module"><a class="header" href="#test-a-module">Test a module</a></h2>
<p><em>Given</em> a file named &quot;Foo.test.pen&quot; with:</p>
<pre><code class="language-pen">import Test'Assert
import 'Foo

Add = \() none | error {
  Assert'True(Foo'Add(41, 1) == 42)
}
</code></pre>
<p><em>When</em> I run <code>pen test</code></p>
<p><em>Then</em> the exit status should be 0</p>
<p><em>And</em> the stdout should contain &quot;OK&quot;.</p>
<h2 id="fail-to-test-a-module"><a class="header" href="#fail-to-test-a-module">Fail to test a module</a></h2>
<p><em>Given</em> a file named &quot;Foo.test.pen&quot; with:</p>
<pre><code class="language-pen">import Test'Assert
import 'Foo

Add = \() none | error {
  Assert'True(Foo'Add(41, 0) == 42)
}
</code></pre>
<p><em>When</em> I run <code>pen test</code></p>
<p><em>Then</em> the exit status should not be 0</p>
<p><em>And</em> the stdout should contain &quot;FAIL&quot;.</p>
<h2 id="run-multiple-tests"><a class="header" href="#run-multiple-tests">Run multiple tests</a></h2>
<p><em>Given</em> a file named &quot;Foo.test.pen&quot; with:</p>
<pre><code class="language-pen">import Test'Assert
import 'Foo

Add = \() none | error {
  Assert'True(Foo'Add(41, 1) == 42)
}

AddMore = \() none | error {
  Assert'True(Foo'Add(40, 2) == 42)
}
</code></pre>
<p><em>When</em> I successfully run <code>pen test</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="run-no-test"><a class="header" href="#run-no-test">Run no test</a></h2>
<p><em>When</em> I run <code>pen test</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="use-a-debug-function-in-a-test"><a class="header" href="#use-a-debug-function-in-a-test">Use a debug function in a test</a></h2>
<p><em>Given</em> a file named &quot;Foo.test.pen&quot; with:</p>
<pre><code class="language-pen">Foo = \() none | error {
  debug(&quot;hello&quot;)
}
</code></pre>
<p><em>When</em> I run <code>pen test</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="formatting-module-files"><a class="header" href="#formatting-module-files">Formatting module files</a></h1>
<h2 id="background-15"><a class="header" href="#background-15">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<h2 id="format-module-files"><a class="header" href="#format-module-files">Format module files</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">Foo = \() none {

  none
}
</code></pre>
<p><em>When</em> I successfully run <code>pen format</code></p>
<p><em>Then</em> a file named &quot;Foo.pen&quot; should contain exactly:</p>
<pre><code class="language-pen">Foo = \() none {
  none
}
</code></pre>
<h2 id="check-if-module-files-are-formatted"><a class="header" href="#check-if-module-files-are-formatted">Check if module files are formatted</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">Foo = \() none {

  none
}
</code></pre>
<p><em>When</em> I run <code>pen format --checked</code></p>
<p><em>Then</em> the exit status should not be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="standard-packages-1"><a class="header" href="#standard-packages-1">Standard packages</a></h1>
<p>These are examples on how to use standard packages.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="core"><a class="header" href="#core">Core</a></h1>
<h2 id="background-16"><a class="header" href="#background-16">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {
    &quot;Core&quot;: &quot;pen:///core&quot;
  }
}
</code></pre>
<h2 id="convert-a-number-to-a-string"><a class="header" href="#convert-a-number-to-a-string">Convert a number to a string</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">import Core'Number

f = \() string {
  Number'String(42)
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="sum-numbers"><a class="header" href="#sum-numbers">Sum numbers</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">import Core'Number

f = \() number {
  Number'Sum([number 1, 2, 3])
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="join-strings"><a class="header" href="#join-strings">Join strings</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">import Core'String

f = \() string {
  String'Join([string &quot;hello&quot;, &quot;world&quot;], &quot; &quot;)
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="slice-a-string-as-bytes"><a class="header" href="#slice-a-string-as-bytes">Slice a string as bytes</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">import Core'String'Byte

f = \() string {
  Byte'Slice(&quot;foo&quot;, 1, 2)
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="os"><a class="header" href="#os">Os</a></h1>
<h2 id="background-17"><a class="header" href="#background-17">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;application&quot;,
  &quot;dependencies&quot;: {
    &quot;Os&quot;: &quot;pen:///os&quot;,
    &quot;Core&quot;: &quot;pen:///core&quot;
  }
}
</code></pre>
<h2 id="build-an-application"><a class="header" href="#build-an-application">Build an application</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Os'Context { Context }
import Os'File
import Os'Process

main = \(ctx context) none {
  if _ = run(ctx.Os) as none {
    none
  } else {
    Process'Exit(ctx.Os, 1)
  }
}

run = \(ctx Context) none | error {
  File'Write(ctx, File'StdOut(), &quot;Hello, world!&quot;)?

  none
}
</code></pre>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code></p>
<p><em>And</em> the stdout from &quot;./app&quot; should contain exactly &quot;Hello, world!&quot;.</p>
<h2 id="get-arguments"><a class="header" href="#get-arguments">Get arguments</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Core'String
import Os'Context { Context }
import Os'Environment
import Os'File
import Os'Process

main = \(ctx context) none {
  if _ = run(ctx.Os) as none {
    none
  } else {
    Process'Exit(ctx.Os, 1)
  }
}

run = \(ctx Context) none | error {
  File'Write(ctx, File'StdOut(), String'Join(Environment'Arguments(ctx), &quot; &quot;))?

  none
}
</code></pre>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app foo bar</code></p>
<p><em>And</em> stdout from &quot;./app foo bar&quot; should contain exactly &quot;foo bar&quot;.</p>
<h2 id="get-an-environment-variable"><a class="header" href="#get-an-environment-variable">Get an environment variable</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Core'String
import Os'Context { Context }
import Os'File
import Os'Environment
import Os'Process

main = \(ctx context) none {
  if _ = run(ctx.Os) as none {
    none
  } else {
    Process'Exit(ctx.Os, 1)
  }
}

run = \(ctx Context) none | error {
  File'Write(ctx, File'StdOut(), Environment'Variable(ctx, &quot;FOO&quot;)?)?

  none
}
</code></pre>
<p><em>And</em> I append &quot;foo&quot; to the environment variable &quot;FOO&quot;</p>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code></p>
<p><em>And</em> stdout from &quot;./app&quot; should contain exactly &quot;foo&quot;.</p>
<h2 id="open-a-file"><a class="header" href="#open-a-file">Open a file</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Os'Context { Context }
import Os'File { File }
import Os'Process

main = \(ctx context) none {
  if _ = run(ctx.Os) as none {
    none
  } else {
    Process'Exit(ctx.Os, 1)
  }
}

run = \(ctx Context) none | error {
  File'Open(ctx, &quot;./foo.txt&quot;)?

  none
}
</code></pre>
<p><em>And</em> a file named &quot;foo.txt&quot; with &quot;&quot;</p>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code>.</p>
<h2 id="read-a-file"><a class="header" href="#read-a-file">Read a file</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Os'Context { Context }
import Os'File
import Os'File'OpenOptions
import Os'Process

main = \(ctx context) none {
  if _ = run(ctx.Os) as none {
    none
  } else {
    Process'Exit(ctx.Os, 1)
  }
}

run = \(ctx Context) none | error {
  f = File'Open(ctx, &quot;foo.txt&quot;)?
  d = File'Read(ctx, f)?

  File'Write(ctx, File'StdOut(), d)?

  none
}
</code></pre>
<p><em>And</em> a file named &quot;foo.txt&quot; with &quot;foo&quot;</p>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code></p>
<p><em>And</em> the stdout from &quot;./app&quot; should contain exactly &quot;foo&quot;.</p>
<h2 id="read-a-file-until-a-limit"><a class="header" href="#read-a-file-until-a-limit">Read a file until a limit</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Os'Context { Context }
import Os'File
import Os'Process

main = \(ctx context) none {
  if _ = run(ctx.Os) as none {
    none
  } else {
    Process'Exit(ctx.Os, 1)
  }
}

run = \(ctx Context) none | error {
  f = File'Open(ctx, &quot;foo.txt&quot;)?
  d = File'ReadLimit(ctx, f, 5)?
  File'Write(ctx, File'StdOut(), d)?

  none
}
</code></pre>
<p><em>And</em> a file named &quot;foo.txt&quot; with &quot;Hello, world!&quot;</p>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code></p>
<p><em>And</em> the stdout from &quot;./app&quot; should contain exactly &quot;Hello&quot;.</p>
<h2 id="write-a-file"><a class="header" href="#write-a-file">Write a file</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Os'Context { Context }
import Os'File
import Os'File'OpenOptions { OpenOptions }
import Os'Process

main = \(ctx context) none {
  if _ = run(ctx.Os) as none {
    none
  } else {
    Process'Exit(ctx.Os, 1)
  }
}

run = \(ctx Context) none | error {
  f = File'OpenWithOptions(
    ctx,
    &quot;./foo.txt&quot;,
    OpenOptions{...OpenOptions'Default(), Write: true},
  )?

  File'Write(ctx, f, &quot;foo&quot;)?

  none
}
</code></pre>
<p><em>And</em> a file named &quot;foo.txt&quot; with &quot;&quot;</p>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code></p>
<p><em>And</em> the file &quot;foo.txt&quot; should contain &quot;foo&quot;.</p>
<h2 id="copy-a-file"><a class="header" href="#copy-a-file">Copy a file</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Os'Context { Context }
import Os'File
import Os'Process

main = \(ctx context) none {
  if _ = File'Copy(ctx.Os, &quot;foo.txt&quot;, &quot;bar.txt&quot;) as none {
    none
  } else {
    Process'Exit(ctx.Os, 1)
  }
}
</code></pre>
<p><em>And</em> a file named &quot;foo.txt&quot; with &quot;foo&quot;</p>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code></p>
<p><em>And</em> the file &quot;foo.txt&quot; should contain &quot;foo&quot;</p>
<p><em>And</em> the file &quot;bar.txt&quot; should contain &quot;foo&quot;.</p>
<h2 id="move-a-file"><a class="header" href="#move-a-file">Move a file</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Os'Context { Context }
import Os'File
import Os'Process

main = \(ctx context) none {
  if _ = File'Move(ctx.Os, &quot;foo.txt&quot;, &quot;bar.txt&quot;) as none {
    none
  } else {
    Process'Exit(ctx.Os, 1)
  }
}
</code></pre>
<p><em>And</em> a file named &quot;foo.txt&quot; with &quot;foo&quot;</p>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code></p>
<p><em>And</em> the file &quot;foo.txt&quot; does not exist</p>
<p><em>And</em> the file &quot;bar.txt&quot; should contain &quot;foo&quot;.</p>
<h2 id="remove-a-file"><a class="header" href="#remove-a-file">Remove a file</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Os'Context { Context }
import Os'File
import Os'Process

main = \(ctx context) none {
  if _ = File'Remove(ctx.Os, &quot;foo.txt&quot;) as none {
    none
  } else {
    Process'Exit(ctx.Os, 1)
  }
}
</code></pre>
<p><em>And</em> a file named &quot;foo.txt&quot; with &quot;&quot;</p>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code></p>
<p><em>And</em> the file &quot;foo.txt&quot; does not exist.</p>
<h2 id="read-a-directory"><a class="header" href="#read-a-directory">Read a directory</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Core'String
import Os'Context { Context }
import Os'File
import Os'Directory
import Os'Process

main = \(ctx context) none {
  if _ = run(ctx.Os) as none {
    none
  } else {
    Process'Exit(ctx.Os, 1)
  }
}

run = \(ctx Context) none | error {
  File'Write(
    ctx,
    File'StdOut(),
    String'Join(Directory'Read(ctx, &quot;.&quot;)?, &quot;\n&quot;),
  )?

  none
}
</code></pre>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code></p>
<p><em>And</em> the stdout from &quot;./app&quot; should contain &quot;main.pen&quot;</p>
<p><em>And</em> the stdout from &quot;./app&quot; should contain &quot;pen.json&quot;.</p>
<h2 id="create-a-directory"><a class="header" href="#create-a-directory">Create a directory</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Os'Context { Context }
import Os'Directory
import Os'Process

main = \(ctx context) none {
  if _ = Directory'Create(ctx.Os, &quot;foo&quot;) as none {
    none
  } else {
    Process'Exit(ctx.Os, 1)
  }
}
</code></pre>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code></p>
<p><em>And</em> a directory named &quot;foo&quot; should exist.</p>
<h2 id="remove-a-directory"><a class="header" href="#remove-a-directory">Remove a directory</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Os'Context { Context }
import Os'Directory
import Os'Process

main = \(ctx context) none {
  if _ = Directory'Remove(ctx.Os, &quot;foo&quot;) as none {
    none
  } else {
    Process'Exit(ctx.Os, 1)
  }
}
</code></pre>
<p><em>And</em> a directory named &quot;foo&quot;</p>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code></p>
<p><em>And</em> a directory named &quot;foo&quot; should not exist.</p>
<h2 id="get-file-metadata"><a class="header" href="#get-file-metadata">Get file metadata</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Os'Context { Context }
import Os'File
import Os'File'Metadata { Metadata }
import Os'Process

main = \(ctx context) none {
  m = File'Metadata(ctx.Os, &quot;foo&quot;)

  c = if m = m as Metadata {
    if m.Size == 3 {
      0
    } else {
      1
    }
  } else {
    1
  }

  Process'Exit(ctx.Os, c)
}
</code></pre>
<p><em>And</em> a file named &quot;foo&quot; with:</p>
<pre><code>foo
</code></pre>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code>.</p>
<h2 id="get-os-time"><a class="header" href="#get-os-time">Get os time</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Core'Number
import Os'Context { Context }
import Os'File
import Os'Process
import Os'Time

main = \(ctx context) none {
  if m = run(ctx.Os) as none {
    none
  } else {
    Process'Exit(ctx.Os, 1)
  }
}

run = \(ctx Context) none | error {
  File'Write(ctx, File'StdOut(), Number'String(Time'Now(ctx)))?

  none
}
</code></pre>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code>.</p>
<h2 id="sleep-1"><a class="header" href="#sleep-1">Sleep</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Os'Context { Context }
import Os'Time

main = \(ctx context) none {
  Time'Sleep(ctx.Os, 1)
}
</code></pre>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code>.</p>
<h2 id="exit-a-process"><a class="header" href="#exit-a-process">Exit a process</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Os'Context { Context }
import Os'Process

main = \(ctx context) none {
  Process'Exit(ctx.Os, 42)
}
</code></pre>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I run <code>./app</code></p>
<p><em>And</em> the exit status should be 42.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="random"><a class="header" href="#random">Random</a></h1>
<h2 id="background-18"><a class="header" href="#background-18">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;application&quot;,
  &quot;dependencies&quot;: {
    &quot;Core&quot;: &quot;pen:///core&quot;,
    &quot;Os&quot;: &quot;pen:///os&quot;,
    &quot;Random&quot;: &quot;pen:///random&quot;
  }
}
</code></pre>
<h2 id="generate-a-random-number"><a class="header" href="#generate-a-random-number">Generate a random number</a></h2>
<p><em>Given</em> a file named &quot;main.pen&quot; with:</p>
<pre><code class="language-pen">import Core'Number
import Os'Context { Context }
import Os'File
import Os'Process
import Random'Random

main = \(ctx context) none {
  if m = run(ctx) as none {
    none
  } else {
    Process'Exit(ctx.Os, 1)
  }
}

run = \(ctx context) none | error {
  File'Write(ctx.Os, File'StdOut(), Number'String(Random'Number(ctx.Random)))?

  none
}
</code></pre>
<p><em>When</em> I successfully run <code>pen build</code></p>
<p><em>Then</em> I successfully run <code>./app</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="test"><a class="header" href="#test">Test</a></h1>
<h2 id="background-19"><a class="header" href="#background-19">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {
    &quot;Test&quot;: &quot;pen:///test&quot;
  }
}
</code></pre>
<h2 id="check-if-a-condition-is-true"><a class="header" href="#check-if-a-condition-is-true">Check if a condition is true</a></h2>
<p><em>Given</em> a file named &quot;foo.test.pen&quot; with:</p>
<pre><code class="language-pen">import Test'Assert

Foo = \() none | error {
  Assert'True(true)
}
</code></pre>
<p><em>When</em> I run <code>pen test</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="check-if-a-value-is-an-error"><a class="header" href="#check-if-a-value-is-an-error">Check if a value is an error</a></h2>
<p><em>Given</em> a file named &quot;foo.test.pen&quot; with:</p>
<pre><code class="language-pen">import Test'Assert

Foo = \() none | error {
  Assert'Error(error(none))
}
</code></pre>
<p><em>When</em> I run <code>pen test</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="make-a-test-fail"><a class="header" href="#make-a-test-fail">Make a test fail</a></h2>
<p><em>Given</em> a file named &quot;foo.test.pen&quot; with:</p>
<pre><code class="language-pen">import Test'Assert

Foo = \() none | error {
  Assert'Fail()
}
</code></pre>
<p><em>When</em> I run <code>pen test</code></p>
<p><em>Then</em> the exit status should be 1.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ffi"><a class="header" href="#ffi">FFI</a></h1>
<h2 id="background-20"><a class="header" href="#background-20">Background</a></h2>
<p><em>Given</em> a file named &quot;pen.json&quot; with:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;library&quot;,
  &quot;dependencies&quot;: {}
}
</code></pre>
<h2 id="import-a-foreign-function-of-native-calling-convention"><a class="header" href="#import-a-foreign-function-of-native-calling-convention">Import a foreign function of native calling convention</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">import foreign g \(number) number

f = \(x number) number {
  g(x)
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="import-a-foreign-function-of-the-c-calling-convention"><a class="header" href="#import-a-foreign-function-of-the-c-calling-convention">Import a foreign function of the C calling convention</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">import foreign &quot;c&quot; g \(number) number

f = \(x number) number {
  g(x)
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="export-a-foreign-function"><a class="header" href="#export-a-foreign-function">Export a foreign function</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">foreign f = \(x number) number {
  x
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<h2 id="export-a-foreign-function-of-the-c-calling-convention"><a class="header" href="#export-a-foreign-function-of-the-c-calling-convention">Export a foreign function of the C calling convention</a></h2>
<p><em>Given</em> a file named &quot;Foo.pen&quot; with:</p>
<pre><code class="language-pen">foreign &quot;c&quot; f = \(x number) number {
  x
}
</code></pre>
<p><em>When</em> I run <code>pen build</code></p>
<p><em>Then</em> the exit status should be 0.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="advanced-features"><a class="header" href="#advanced-features">Advanced features</a></h1>
<p>This chapter lists advanced features of Pen and describe when and how to use them.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cross-compile"><a class="header" href="#cross-compile">Cross compile</a></h1>
<p>The language's compiler supports <a href="https://en.wikipedia.org/wiki/cross_compiler">cross compile</a>. To compile applications and libraries for different targets, specify the <code>--target</code> option of the <code>pen build</code> subcommand.</p>
<p>For example, run the following command to compile a <code>wasm32</code> binary for the WASI platform.</p>
<pre><code class="language-sh">pen build --target wasm32-wasi
</code></pre>
<p>Note that we currently support those targets via <a href="https://www.rust-lang.org/">Rust</a>'s cross compiler toolchain. Please install a Rust compiler through <a href="https://rust-lang.github.io/rustup/"><code>rustup</code></a> to enable installation of toolchains for different targets.</p>
<h2 id="supported-targets"><a class="header" href="#supported-targets">Supported targets</a></h2>
<p>Run <code>pen build --help</code> to see all supported targets.</p>
<h2 id="system-package-support"><a class="header" href="#system-package-support">System package support</a></h2>
<p>Cross compile support of <a href="advanced-features//references/language/packages.html#system-packages">system packages</a> are totally up to their developers. For example, <a href="advanced-features//references/standard-packages/os.html">the <code>Os</code> standard system package</a> supports most targets as long as their platforms expose OS-like APIs. However, some custom system packages might not support those targets because of their limited use cases.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="foreign-function-interface-ffi"><a class="header" href="#foreign-function-interface-ffi">Foreign Function Interface (FFI)</a></h1>
<p>Using FFI, you can import or export functions in foreign languages, such as <a href="https://www.rust-lang.org/">Rust</a> and C.</p>
<h2 id="importing-functions-in-foreign-languages"><a class="header" href="#importing-functions-in-foreign-languages">Importing functions in foreign languages</a></h2>
<p>You can import functions in foreign languages using <a href="advanced-features//references/language/syntax.html#foreign-import-statement">foreign import statements</a>. The statements specify the foreign functions' calling convention, names and types.</p>
<p>You might specify calling conventions of foreign functions in a format of string literals after <code>import foreign</code> keywords optionally. Currently, only the C calling convention is supported as <code>&quot;c&quot;</code>. If the options are omitted, the functions are imported with the native calling convention of Pen.</p>
<pre><code class="language-pen">import foreign &quot;c&quot; foo \(number, number) number
</code></pre>
<blockquote>
<p>Caveat: You can import foreign functions that might cause side effects <strong>only in system packages</strong>. See also <a href="advanced-features/writing-system-packages.html">Writing system packages</a>.</p>
</blockquote>
<h2 id="exporting-functions-to-foreign-languages"><a class="header" href="#exporting-functions-to-foreign-languages">Exporting functions to foreign languages</a></h2>
<p>You can export functions to foreign languages using <a href="advanced-features//references/language/syntax.html#foreign-function-definition">foreign function definitions</a>, which have <code>foreign</code> keywords in front of normal function definitions.</p>
<p>You might specify calling conventions of exported foreign functions optionally after <code>foreign</code> keywords as well as <a href="advanced-features/ffi.html#importing-functions-in-foreign-languages">imported foreign functions</a>.</p>
<pre><code class="language-pen">foreign &quot;c&quot; foo = \(x number, y number) number {
  ...
}
</code></pre>
<h2 id="building-libraries-of-foreign-languages"><a class="header" href="#building-libraries-of-foreign-languages">Building libraries of foreign languages</a></h2>
<p>During builds of your packages, you might want to build libraries of foreign languages so that you can use their functions. If that's your case, you can set up <code>pen-ffi</code> scripts in your packages. The script files run on every build and output absolute paths to <code>.a</code> archive files of your libraries in foreign languages built by the scripts. The script files may or may not have file extensions.</p>
<p>The <code>pen-ffi</code> scripts should accept the following command line arguments.</p>
<div class="table-wrapper"><table><thead><tr><th>Argument</th><th>Required</th><th>Description</th></tr></thead><tbody>
<tr><td><code>-t &lt;target&gt;</code></td><td>No</td><td>Custom target triple of builds</td></tr>
</tbody></table>
</div>
<p>One of examples in practice is <a href="https://github.com/pen-lang/pen/blob/main/packages/core/pen-ffi.sh">a <code>pen-ffi.sh</code> file in the <code>Core</code> library</a>.</p>
<h2 id="native-calling-convention-in-pen"><a class="header" href="#native-calling-convention-in-pen">Native calling convention in Pen</a></h2>
<blockquote>
<p>TBD</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="writing-system-packages"><a class="header" href="#writing-system-packages">Writing system packages</a></h1>
<p>Using existing system packages covers most use cases in application development. However, by writing your own system packages, you can achieve the following:</p>
<ul>
<li>Define your own system interfaces of functions and types with side effects.</li>
<li>Link applications in arbitrary file formats.</li>
</ul>
<p>This page assumes that you have already read <a href="advanced-features//references/language/packages.html">Packages</a>.</p>
<blockquote>
<p>Caveat: Providing bad system packages which do not conform to conventions can break the ecosystem of the language! In the worst cases, they might make applications malfunction. Please be careful to follow the conventions to keep applications maintainable and portable.</p>
</blockquote>
<h2 id="functionalities-of-system-packages"><a class="header" href="#functionalities-of-system-packages">Functionalities of system packages</a></h2>
<p>System packages have the following functionalities:</p>
<ul>
<li>Define context types.</li>
<li>Provide system interfaces as functions and types.</li>
<li>Link application files.</li>
</ul>
<h3 id="defining-context-types"><a class="header" href="#defining-context-types">Defining context types</a></h3>
<p>Every system package must have a module named <code>Context</code> at the top level. The module defines a <code>Context</code> type and an <code>UnsafeNew</code> function that returns a <code>Context</code> value with no argument.</p>
<p>For example, a system package for command line applications might have the following <code>Context</code> module:</p>
<pre><code class="language-pen">...

type Context {
  print \(string) none
}

UnsafeNew = \() Context {
  Context{
    print: ...
  }
}
</code></pre>
<p>The language's compiler uses these type and function to compose a <code>context</code> type passed to <code>main</code> functions in <code>main</code> modules in application packages.</p>
<h3 id="providing-system-functions-and-types"><a class="header" href="#providing-system-functions-and-types">Providing system functions and types</a></h3>
<p>System packages are the only places where you can define functions that have side effects. Thanks to system packages, applications can perform effects to interact with the world, such as:</p>
<ul>
<li>Console input/output</li>
<li>File system operations</li>
<li>Networking</li>
<li>Random number generation</li>
</ul>
<p>Note that <strong>system packages should never expose side effects directly through their functions</strong>; all public functions in system packages must be purely functional. Instead, you need to pass a <code>Context</code> type to every effect-ful function for it to make side effects.</p>
<p>For example, a system package for command line applications might have the following types and functions:</p>
<pre><code class="language-pen"># Define a foreign function to output a string in console.
import foreign _pen_cli_print \(string) none

type Context {
  print: _pen_cli_print,
}

Print = \(ctx Context, s string) none {
  ctx.print(s)
}
</code></pre>
<p>rather than:</p>
<pre><code class="language-pen">import foreign _pen_cli_print \(string) none

Print = \(s string) none {
  # Oh, no! We make side effects in a public function directly.
  _pen_cli_print(s)
}
</code></pre>
<h3 id="linking-application-files-optional"><a class="header" href="#linking-application-files-optional">Linking application files (optional)</a></h3>
<p>System packages might have optional script files named <code>pen-link</code> at their top directories. On every build of application packages using the system packages, the script files run given object files specified as command line arguments to link application files. The script files may or may not have file extensions.</p>
<p>The scripts should accept the following command line arguments.</p>
<div class="table-wrapper"><table><thead><tr><th>Argument</th><th>Required</th><th>Description</th></tr></thead><tbody>
<tr><td><code>-t &lt;target&gt;</code></td><td>No</td><td>Target triple</td></tr>
<tr><td><code>-o &lt;application&gt;</code></td><td>Yes</td><td>Path of an application file</td></tr>
<tr><td><code>&lt;archive&gt;...</code></td><td>Yes</td><td>Paths of archive files sorted topologically from main packages</td></tr>
</tbody></table>
</div>
<p>At the liking phase, compiled main functions are available under a symbol named <code>_pen_main</code> with Pen's native calling convention.</p>
<h2 id="examples-4"><a class="header" href="#examples-4">Examples</a></h2>
<p><a href="https://github.com/pen-lang/pen/tree/main/packages/os">The <code>Os</code> standard package</a> is an example of system packages.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="roadmap"><a class="header" href="#roadmap">Roadmap</a></h1>
<p>Items are ordered by priority.</p>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
Basic syntax</li>
<li><input disabled="" type="checkbox" checked=""/>
CPS transformation</li>
<li><input disabled="" type="checkbox" checked=""/>
Asynchronous I/O
<ul>
<li><input disabled="" type="checkbox" checked=""/>
Asynchronous synchronization</li>
</ul>
</li>
<li><input disabled="" type="checkbox" checked=""/>
Capability-based effect system</li>
<li><input disabled="" type="checkbox" checked=""/>
Performant GC
<ul>
<li><input disabled="" type="checkbox" checked=""/>
Automatic reference counting</li>
</ul>
</li>
<li><input disabled="" type="checkbox" checked=""/>
Foreign function interface</li>
<li><input disabled="" type="checkbox" checked=""/>
Basic OS interface</li>
<li><input disabled="" type="checkbox" checked=""/>
WASM backend</li>
<li><input disabled="" type="checkbox" checked=""/>
Stream-based list type</li>
<li><input disabled="" type="checkbox" checked=""/>
Testing framework</li>
<li><input disabled="" type="checkbox" checked=""/>
TCP/UDP sockets</li>
<li><input disabled="" type="checkbox" checked=""/>
System time</li>
<li><input disabled="" type="checkbox" checked=""/>
Asynchronous operations</li>
<li><input disabled="" type="checkbox" checked=""/>
Parallel computation</li>
<li><input disabled="" type="checkbox" checked=""/>
Binary operations</li>
<li><input disabled="" type="checkbox" checked=""/>
List comprehension</li>
<li><input disabled="" type="checkbox" checked=""/>
Multiple system packages</li>
<li><input disabled="" type="checkbox" checked=""/>
Map type</li>
<li><input disabled="" type="checkbox" checked=""/>
Code formatter</li>
<li><input disabled="" type="checkbox" checked=""/>
Documentation generator</li>
<li><input disabled="" type="checkbox" checked=""/>
Process management</li>
<li><input disabled="" type="checkbox"/>
IDE/editor support
<ul>
<li><input disabled="" type="checkbox"/>
Language server</li>
</ul>
</li>
<li><input disabled="" type="checkbox"/>
Reflection</li>
<li><input disabled="" type="checkbox"/>
Serialization / deserialization</li>
<li><input disabled="" type="checkbox"/>
Mutable state
<ul>
<li><input disabled="" type="checkbox"/>
Thread safety</li>
</ul>
</li>
<li><input disabled="" type="checkbox"/>
Vector type</li>
<li><input disabled="" type="checkbox"/>
Web browser interface</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="the-zen"><a class="header" href="#the-zen">The Zen</a></h1>
<ul>
<li>Beautiful is better than ugly.</li>
<li>Explicit is better than implicit.</li>
<li>Simple is better than complex.</li>
<li>One way to do one thing</li>
<li>Single solution for multiple problems</li>
<li>Steady value over volatile value</li>
</ul>
<h2 id="language-qualities"><a class="header" href="#language-qualities">Language qualities</a></h2>
<p>In the order of priority,</p>
<ul>
<li>Simplicity</li>
<li>Readability</li>
<li>Consistency</li>
<li>Writability</li>
</ul>
<h2 id="references-1"><a class="header" href="#references-1">References</a></h2>
<ul>
<li><a href="https://www.python.org/dev/peps/pep-0020/">The Zen of Python</a></li>
<li><a href="https://ziglang.org/documentation/master/#Zen">Zen | The Zig programming language</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="theme/pagetoc.js"></script>
        <script type="text/javascript" src="theme/custom-highlight.js"></script>
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
